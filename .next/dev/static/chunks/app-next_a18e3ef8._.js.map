{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/neon-salvage/app-next/components/Reel.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { motion, useAnimation } from \"framer-motion\";\r\nimport { useEffect } from \"react\";\r\n\r\nconst SYMBOLS = [\"CR10\", \"CR20\", \"CR40\", \"MOD\", \"JACKPOT\"];\r\n\r\nexport default function Reel({\r\n  value,\r\n  spinning,\r\n  delay = 0,\r\n}: {\r\n  value: string;\r\n  spinning: boolean;\r\n  delay?: number;\r\n}) {\r\n  const controls = useAnimation();\r\n\r\n  useEffect(() => {\r\n    async function spin() {\r\n      if (!spinning) return;\r\n\r\n      await controls.start({\r\n        y: [\"0%\", \"-80%\"],\r\n        transition: {\r\n          repeat: Infinity,\r\n          ease: \"linear\",\r\n          duration: 0.4,\r\n        },\r\n      });\r\n    }\r\n\r\n    spin();\r\n  }, [spinning, controls]);\r\n\r\n  useEffect(() => {\r\n    async function stop() {\r\n      if (spinning) return;\r\n\r\n      await controls.start({\r\n        y: 0,\r\n        transition: {\r\n          delay,\r\n          type: \"spring\",\r\n          stiffness: 180,\r\n          damping: 18,\r\n        },\r\n      });\r\n    }\r\n\r\n    stop();\r\n  }, [spinning, controls, delay]);\r\n\r\n  return (\r\n    <div className=\"relative w-24 h-24 overflow-hidden rounded-xl bg-gradient-to-br from-[#1b2340] to-[#0d1224] shadow-lg shadow-cyan-500/30\">\r\n      <motion.div\r\n        animate={controls}\r\n        className=\"flex flex-col items-center\"\r\n      >\r\n        {[...SYMBOLS, ...SYMBOLS].map((s, i) => (\r\n          <div\r\n            key={i}\r\n            className={`h-24 flex items-center justify-center font-bold text-lg ${\r\n              s === \"JACKPOT\"\r\n                ? \"text-yellow-300\"\r\n                : \"text-cyan-200\"\r\n            }`}\r\n          >\r\n            {s}\r\n          </div>\r\n        ))}\r\n      </motion.div>\r\n\r\n      {/* FINAL SNAP DISPLAY (CLICK-THROUGH) */}\r\n      {!spinning && (\r\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center font-bold text-lg text-cyan-200\">\r\n          {value}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;;;AAHA;;;AAKA,MAAM,UAAU;IAAC;IAAQ;IAAQ;IAAQ;IAAO;CAAU;AAE3C,SAAS,KAAK,EAC3B,KAAK,EACL,QAAQ,EACR,QAAQ,CAAC,EAKV;;IACC,MAAM,WAAW,IAAA,2NAAY;IAE7B,IAAA,yLAAS;0BAAC;YACR,eAAe;gBACb,IAAI,CAAC,UAAU;gBAEf,MAAM,SAAS,KAAK,CAAC;oBACnB,GAAG;wBAAC;wBAAM;qBAAO;oBACjB,YAAY;wBACV,QAAQ;wBACR,MAAM;wBACN,UAAU;oBACZ;gBACF;YACF;YAEA;QACF;yBAAG;QAAC;QAAU;KAAS;IAEvB,IAAA,yLAAS;0BAAC;YACR,eAAe;gBACb,IAAI,UAAU;gBAEd,MAAM,SAAS,KAAK,CAAC;oBACnB,GAAG;oBACH,YAAY;wBACV;wBACA,MAAM;wBACN,WAAW;wBACX,SAAS;oBACX;gBACF;YACF;YAEA;QACF;yBAAG;QAAC;QAAU;QAAU;KAAM;IAE9B,qBACE,4MAAC;QAAI,WAAU;;0BACb,4MAAC,sNAAM,CAAC,GAAG;gBACT,SAAS;gBACT,WAAU;0BAET;uBAAI;uBAAY;iBAAQ,CAAC,GAAG,CAAC,CAAC,GAAG,kBAChC,4MAAC;wBAEC,WAAW,CAAC,wDAAwD,EAClE,MAAM,YACF,oBACA,iBACJ;kCAED;uBAPI;;;;;;;;;;YAaV,CAAC,0BACA,4MAAC;gBAAI,WAAU;0BACZ;;;;;;;;;;;;AAKX;GA1EwB;;QASL,2NAAY;;;KATP"}},
    {"offset": {"line": 122, "column": 0}, "map": {"version":3,"sources":["file:///E:/neon-salvage/app-next/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport Reel from \"../components/Reel\";\n\nconst API_URL =\n  process.env.NODE_ENV === \"development\"\n    ? \"https://neon-salvage.vercel.app/api/spin\"\n    : \"/api/spin\";\n\nexport default function Home() {\n  const [energy, setEnergy] = useState(10);\n  const [status, setStatus] = useState(\"\");\n  const [spinning, setSpinning] = useState(false);\n  const [reels, setReels] = useState([\"?\", \"?\", \"?\"]);\n\n  useEffect(() => {\n    const tg = (window as any).Telegram?.WebApp;\n    if (tg) {\n      tg.expand();\n      tg.ready();\n    }\n  }, []);\n\n  async function extract() {\n    const tg = (window as any).Telegram?.WebApp;\n    if (!tg || spinning) return;\n\n    setSpinning(true);\n    setStatus(\"Extracting…\");\n\n    try {\n      const res = await fetch(API_URL, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ initData: tg.initData }),\n      });\n\n      const data = await res.json();\n\n      if (data.error) {\n        setStatus(data.error);\n        setSpinning(false);\n        return;\n      }\n\n      // staggered reel stop (AAA timing)\n      setTimeout(() => setReels((r) => [data.reels[0], r[1], r[2]]), 600);\n      setTimeout(() => setReels((r) => [r[0], data.reels[1], r[2]]), 900);\n      setTimeout(() => setReels((r) => [r[0], r[1], data.reels[2]]), 1200);\n\n      setTimeout(() => {\n        setEnergy(data.energy);\n        setStatus(`+${data.reward} CR`);\n        setSpinning(false);\n      }, 1400);\n    } catch (err) {\n      console.error(err);\n      setStatus(\"Server error\");\n      setSpinning(false);\n    }\n  }\n\n  return (\n    <main className=\"min-h-screen flex flex-col items-center justify-center gap-6 bg-gradient-to-b from-[#0b1020] to-black\">\n      <h1 className=\"text-cyan-400 text-2xl tracking-widest font-bold\">\n        NEON SALVAGE\n      </h1>\n\n      <div className=\"bg-[#121a2f] px-4 py-2 rounded-xl shadow-inner shadow-cyan-500/30\">\n        ⚡ {energy}\n      </div>\n\n      <div className=\"flex gap-4\">\n        <Reel value={reels[0]} spinning={spinning} delay={0} />\n        <Reel value={reels[1]} spinning={spinning} delay={0.15} />\n        <Reel value={reels[2]} spinning={spinning} delay={0.3} />\n      </div>\n\n      <button\n        onClick={extract}\n        disabled={spinning}\n        className=\"px-8 py-4 rounded-2xl text-black font-bold tracking-wide\n          bg-gradient-to-r from-cyan-400 to-purple-500\n          shadow-lg shadow-cyan-500/40\n          active:scale-95 disabled:opacity-50\"\n      >\n        EXTRACT\n      </button>\n\n      <div className=\"h-6 text-lg\">{status}</div>\n    </main>\n  );\n}\n"],"names":[],"mappings":";;;;AAME;;AAJF;AACA;;;AAHA;;;AAKA,MAAM,UACJ,uCACI,6CACA;AAES,SAAS;;IACtB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,wLAAQ,EAAC;IACrC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,wLAAQ,EAAC;IACrC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,wLAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,wLAAQ,EAAC;QAAC;QAAK;QAAK;KAAI;IAElD,IAAA,yLAAS;0BAAC;YACR,MAAM,KAAK,AAAC,OAAe,QAAQ,EAAE;YACrC,IAAI,IAAI;gBACN,GAAG,MAAM;gBACT,GAAG,KAAK;YACV;QACF;yBAAG,EAAE;IAEL,eAAe;QACb,MAAM,KAAK,AAAC,OAAe,QAAQ,EAAE;QACrC,IAAI,CAAC,MAAM,UAAU;QAErB,YAAY;QACZ,UAAU;QAEV,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,SAAS;gBAC/B,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,UAAU,GAAG,QAAQ;gBAAC;YAC/C;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAE3B,IAAI,KAAK,KAAK,EAAE;gBACd,UAAU,KAAK,KAAK;gBACpB,YAAY;gBACZ;YACF;YAEA,mCAAmC;YACnC,WAAW,IAAM,SAAS,CAAC,IAAM;wBAAC,KAAK,KAAK,CAAC,EAAE;wBAAE,CAAC,CAAC,EAAE;wBAAE,CAAC,CAAC,EAAE;qBAAC,GAAG;YAC/D,WAAW,IAAM,SAAS,CAAC,IAAM;wBAAC,CAAC,CAAC,EAAE;wBAAE,KAAK,KAAK,CAAC,EAAE;wBAAE,CAAC,CAAC,EAAE;qBAAC,GAAG;YAC/D,WAAW,IAAM,SAAS,CAAC,IAAM;wBAAC,CAAC,CAAC,EAAE;wBAAE,CAAC,CAAC,EAAE;wBAAE,KAAK,KAAK,CAAC,EAAE;qBAAC,GAAG;YAE/D,WAAW;gBACT,UAAU,KAAK,MAAM;gBACrB,UAAU,CAAC,CAAC,EAAE,KAAK,MAAM,CAAC,GAAG,CAAC;gBAC9B,YAAY;YACd,GAAG;QACL,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC;YACd,UAAU;YACV,YAAY;QACd;IACF;IAEA,qBACE,4MAAC;QAAK,WAAU;;0BACd,4MAAC;gBAAG,WAAU;0BAAmD;;;;;;0BAIjE,4MAAC;gBAAI,WAAU;;oBAAoE;oBAC9E;;;;;;;0BAGL,4MAAC;gBAAI,WAAU;;kCACb,4MAAC,gJAAI;wBAAC,OAAO,KAAK,CAAC,EAAE;wBAAE,UAAU;wBAAU,OAAO;;;;;;kCAClD,4MAAC,gJAAI;wBAAC,OAAO,KAAK,CAAC,EAAE;wBAAE,UAAU;wBAAU,OAAO;;;;;;kCAClD,4MAAC,gJAAI;wBAAC,OAAO,KAAK,CAAC,EAAE;wBAAE,UAAU;wBAAU,OAAO;;;;;;;;;;;;0BAGpD,4MAAC;gBACC,SAAS;gBACT,UAAU;gBACV,WAAU;0BAIX;;;;;;0BAID,4MAAC;gBAAI,WAAU;0BAAe;;;;;;;;;;;;AAGpC;GAnFwB;KAAA"}}]
}