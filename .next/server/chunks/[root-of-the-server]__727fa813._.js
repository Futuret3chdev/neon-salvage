module.exports=[57328,(e,t,r)=>{t.exports=e.x("node:assert",()=>require("node:assert"))},84064,(e,t,r)=>{"use strict";var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7],o={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function s(e,t){var r=o[e];return void 0===r?255:r<<t}t.exports=function(e){var t=e.indexOf("%");if(-1===t)return e;for(var r=e.length,o="",i=0,a=0,l=t,u=12;t>-1&&t<r;){var c=s(e[t+1],4)|s(e[t+2],0),h=n[c];if(u=n[256+u+h],a=a<<6|c&n[364+h],12===u)o+=e.slice(i,l),o+=a<=65535?String.fromCharCode(a):String.fromCharCode(55232+(a>>10),56320+(1023&a)),a=0,i=t+3,t=l=e.indexOf("%",i);else{if(0===u)return null;if((t+=3)<r&&37===e.charCodeAt(t))continue;return null}}return o+e.slice(i)}},62820,(e,t,r)=>{"use strict";let n=e.r(84064),o=/\+/g,s=function(){};s.prototype=Object.create(null),t.exports=function(e){let t=new s;if("string"!=typeof e)return t;let r=e.length,i="",a="",l=-1,u=-1,c=!1,h=!1,d=!1,f=!1,p=!1,y=0;for(let s=0;s<r+1;s++)if(38===(y=s!==r?e.charCodeAt(s):38)){if((p=u>l)||(u=s),i=e.slice(l+1,u),p||i.length>0){d&&(i=i.replace(o," ")),c&&(i=n(i)||i),p&&(a=e.slice(u+1,s),f&&(a=a.replace(o," ")),h&&(a=n(a)||a));let r=t[i];void 0===r?t[i]=a:r.pop?r.push(a):t[i]=[r,a]}a="",l=s,u=s,c=!1,h=!1,d=!1,f=!1}else 61===y?u<=l?u=s:h=!0:43===y?u>l?f=!0:d=!0:37===y&&(u>l?h=!0:c=!0);return t}},67734,(e,t,r)=>{let n=Array.from({length:256},(e,t)=>"%"+((t<16?"0":"")+t.toString(16)).toUpperCase()),o=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0]);t.exports={encodeString:function(e){let t=e.length;if(0===t)return"";let r="",s=0,i=0;e:for(;i<t;i++){let a=e.charCodeAt(i);for(;a<128;){if(1!==o[a]&&(s<i&&(r+=e.slice(s,i)),s=i+1,r+=n[a]),++i===t)break e;a=e.charCodeAt(i)}if(s<i&&(r+=e.slice(s,i)),a<2048){s=i+1,r+=n[192|a>>6]+n[128|63&a];continue}if(a<55296||a>=57344){s=i+1,r+=n[224|a>>12]+n[128|a>>6&63]+n[128|63&a];continue}if(++i>=t)throw Error("URI malformed");let l=1023&e.charCodeAt(i);s=i+1,r+=n[240|(a=65536+((1023&a)<<10|l))>>18]+n[128|a>>12&63]+n[128|a>>6&63]+n[128|63&a]}return 0===s?e:s<t?r+e.slice(s):r}}},93266,(e,t,r)=>{"use strict";let{encodeString:n}=e.r(67734);function o(e){let t=typeof e;return"string"===t?n(e):"bigint"===t?e.toString():"boolean"===t?e?"true":"false":"number"===t&&Number.isFinite(e)?e<1e21?""+e:n(""+e):""}t.exports=function(e){let t="";if(null===e||"object"!=typeof e)return t;let r=Object.keys(e),s=r.length,i=0;for(let a=0;a<s;a++){let s=r[a],l=e[s],u=n(s)+"=";if(a&&(t+="&"),Array.isArray(l)){i=l.length;for(let e=0;e<i;e++)e&&(t+="&"),t+=u,t+=o(l[e])}else t+=u,t+=o(l)}return t}},65253,(e,t,r)=>{"use strict";let n=e.r(62820),o=e.r(93266),s={parse:n,stringify:o};t.exports=s,t.exports.default=s,t.exports.parse=n,t.exports.stringify=o},3006,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},77322,(e,t,r)=>{"use strict";var n;Object.defineProperty(r,"__esModule",{value:!0}),r.types=void 0,(n=r.types||(r.types={}))[n.ROOT=0]="ROOT",n[n.GROUP=1]="GROUP",n[n.POSITION=2]="POSITION",n[n.SET=3]="SET",n[n.RANGE=4]="RANGE",n[n.REPETITION=5]="REPETITION",n[n.REFERENCE=6]="REFERENCE",n[n.CHAR=7]="CHAR"},76338,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},26821,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e.r(3006),r),o(e.r(77322),r),o(e.r(76338),r)},90253,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.anyChar=r.notWhitespace=r.whitespace=r.notInts=r.ints=r.notWords=r.words=void 0;let n=e.r(26821),o=()=>[{type:n.types.RANGE,from:48,to:57}],s=()=>[{type:n.types.CHAR,value:95},{type:n.types.RANGE,from:97,to:122},{type:n.types.RANGE,from:65,to:90},{type:n.types.RANGE,from:48,to:57}],i=()=>[{type:n.types.CHAR,value:9},{type:n.types.CHAR,value:10},{type:n.types.CHAR,value:11},{type:n.types.CHAR,value:12},{type:n.types.CHAR,value:13},{type:n.types.CHAR,value:32},{type:n.types.CHAR,value:160},{type:n.types.CHAR,value:5760},{type:n.types.RANGE,from:8192,to:8202},{type:n.types.CHAR,value:8232},{type:n.types.CHAR,value:8233},{type:n.types.CHAR,value:8239},{type:n.types.CHAR,value:8287},{type:n.types.CHAR,value:12288},{type:n.types.CHAR,value:65279}];r.words=()=>({type:n.types.SET,set:s(),not:!1}),r.notWords=()=>({type:n.types.SET,set:s(),not:!0}),r.ints=()=>({type:n.types.SET,set:o(),not:!1}),r.notInts=()=>({type:n.types.SET,set:o(),not:!0}),r.whitespace=()=>({type:n.types.SET,set:i(),not:!1}),r.notWhitespace=()=>({type:n.types.SET,set:i(),not:!0}),r.anyChar=()=>({type:n.types.SET,set:[{type:n.types.CHAR,value:10},{type:n.types.CHAR,value:13},{type:n.types.CHAR,value:8232},{type:n.types.CHAR,value:8233}],not:!0})},16387,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.tokenizeClass=r.strToChars=void 0;let i=e.r(26821),a=s(e.r(90253));r.strToChars=e=>e.replace(/(\[\\b\])|(\\)?\\(?:u([A-F0-9]{4})|x([A-F0-9]{2})|c([@A-Z[\\\]^?])|([0tnvfr]))/g,(e,t,r,n,o,s,i)=>{if(r)return e;let a=String.fromCharCode(t?8:n?parseInt(n,16):o?parseInt(o,16):s?"@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^ ?".indexOf(s):({0:0,t:9,n:10,v:11,f:12,r:13})[i]);return/[[\]{}^$.|?*+()]/.test(a)?`\\${a}`:a}),r.tokenizeClass=(e,t)=>{var r,n,o,s,l,u,c;let h=[],d,f,p=/\\(?:(w)|(d)|(s)|(W)|(D)|(S))|((?:(?:\\)(.)|([^\]\\]))-(((?:\\)])|(((?:\\)?([^\]])))))|(\])|(?:\\)?([^])/g;for(;null!==(d=p.exec(e));){let e=null!=(c=null!=(u=null!=(l=null!=(s=null!=(o=null!=(n=null!=(r=d[1]&&a.words())?r:d[2]&&a.ints())?n:d[3]&&a.whitespace())?o:d[4]&&a.notWords())?s:d[5]&&a.notInts())?l:d[6]&&a.notWhitespace())?u:d[7]&&{type:i.types.RANGE,from:(d[8]||d[9]).charCodeAt(0),to:(f=d[10]).charCodeAt(f.length-1)})?c:(f=d[16])&&{type:i.types.CHAR,value:f.charCodeAt(0)};if(!e)return[h,p.lastIndex];h.push(e)}throw SyntaxError(`Invalid regular expression: /${t}/: Unterminated character class`)}},90793,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.tokenizer=void 0;let i=s(e.r(16387)),a=e.r(26821),l=s(e.r(90253));r.tokenizer=e=>{let t=0,r,n={type:a.types.ROOT,stack:[]},o=n,s=n.stack,u=[],c=[],h=0,d=t=>{throw SyntaxError(`Invalid regular expression: /${e}/: Nothing to repeat at column ${t-1}`)},f=i.strToChars(e);for(;t<f.length;)switch(r=f[t++]){case"\\":if(t===f.length)throw SyntaxError(`Invalid regular expression: /${e}/: \\ at end of pattern`);switch(r=f[t++]){case"b":s.push({type:a.types.POSITION,value:"b"});break;case"B":s.push({type:a.types.POSITION,value:"B"});break;case"w":s.push(l.words());break;case"W":s.push(l.notWords());break;case"d":s.push(l.ints());break;case"D":s.push(l.notInts());break;case"s":s.push(l.whitespace());break;case"S":s.push(l.notWhitespace());break;default:if(/\d/.test(r)){let e=r;for(;t<f.length&&/\d/.test(f[t]);)e+=f[t++];let n=parseInt(e,10),o={type:a.types.REFERENCE,value:n};s.push(o),c.push({reference:o,stack:s,index:s.length-1})}else s.push({type:a.types.CHAR,value:r.charCodeAt(0)})}break;case"^":s.push({type:a.types.POSITION,value:"^"});break;case"$":s.push({type:a.types.POSITION,value:"$"});break;case"[":{let r;"^"===f[t]?(r=!0,t++):r=!1;let n=i.tokenizeClass(f.slice(t),e);t+=n[1],s.push({type:a.types.SET,set:n[0],not:r});break}case".":s.push(l.anyChar());break;case"(":{let n={type:a.types.GROUP,stack:[],remember:!0};if("?"===f[t]){if(r=f[t+1],t+=2,"="===r)n.followedBy=!0;else if("!"===r)n.notFollowedBy=!0;else if(":"!==r)throw SyntaxError(`Invalid regular expression: /${e}/: Invalid group, character '${r}' after '?' at column ${t-1}`);n.remember=!1}else h+=1;s.push(n),u.push(o),o=n,s=n.stack;break}case")":if(0===u.length)throw SyntaxError(`Invalid regular expression: /${e}/: Unmatched ) at column ${t-1}`);s=(o=u.pop()).options?o.options[o.options.length-1]:o.stack;break;case"|":{o.options||(o.options=[o.stack],delete o.stack);let e=[];o.options.push(e),s=e;break}case"{":{let e=/^(\d+)(,(\d+)?)?\}/.exec(f.slice(t)),r,n;null!==e?(0===s.length&&d(t),r=parseInt(e[1],10),n=e[2]?e[3]?parseInt(e[3],10):1/0:r,t+=e[0].length,s.push({type:a.types.REPETITION,min:r,max:n,value:s.pop()})):s.push({type:a.types.CHAR,value:123});break}case"?":0===s.length&&d(t),s.push({type:a.types.REPETITION,min:0,max:1,value:s.pop()});break;case"+":0===s.length&&d(t),s.push({type:a.types.REPETITION,min:1,max:1/0,value:s.pop()});break;case"*":0===s.length&&d(t),s.push({type:a.types.REPETITION,min:0,max:1/0,value:s.pop()});break;default:s.push({type:a.types.CHAR,value:r.charCodeAt(0)})}if(0!==u.length)throw SyntaxError(`Invalid regular expression: /${e}/: Unterminated group`);return function(e,t){for(let r of e.reverse())if(t<r.reference.value){r.reference.type=a.types.CHAR;let e=r.reference.value.toString();if(r.reference.value=parseInt(e,8),!/^[0-7]+$/.test(e)){let t=0;for(;"8"!==e[t]&&"9"!==e[t];)t+=1;if(0===t?(r.reference.value=e.charCodeAt(0),t+=1):r.reference.value=parseInt(e.slice(0,t),8),e.length>t){let n=r.stack.splice(r.index+1);for(let n of e.slice(t))r.stack.push({type:a.types.CHAR,value:n.charCodeAt(0)});r.stack.push(...n)}}}}(c,h),n}},31411,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.NOTANYCHAR=r.WHITESPACE=r.WORDS=r.INTS=void 0;let i=s(e.r(90253)),a=e.r(26821);function l(e){let t={},r=0;for(let n of e)n.type===a.types.CHAR&&(t[n.value]=!0),n.type===a.types.RANGE&&(t[`${n.from}-${n.to}`]=!0),r+=1;return{lookup:()=>Object.assign({},t),len:r}}r.INTS=l(i.ints().set),r.WORDS=l(i.words().set),r.WHITESPACE=l(i.whitespace().set),r.NOTANYCHAR=l(i.anyChar().set)},39031,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.writeSetTokens=r.setChar=void 0;let i=e.r(26821),a=s(e.r(31411));function l(e){return 94===e?"\\^":92===e?"\\\\":93===e?"\\]":45===e?"\\-":String.fromCharCode(e)}function u(e,{lookup:t,len:r}){if(r!==e.length)return!1;let n=t();for(let t of e){if(t.type===i.types.SET)return!1;let e=t.type===i.types.CHAR?t.value:`${t.from}-${t.to}`;if(!n[e])return!1;n[e]=!1}return!0}r.setChar=l,r.writeSetTokens=function e(t,r=!1){if(u(t.set,a.INTS))return t.not?"\\D":"\\d";if(u(t.set,a.WORDS))return t.not?"\\W":"\\w";if(t.not&&u(t.set,a.NOTANYCHAR))return".";if(u(t.set,a.WHITESPACE))return t.not?"\\S":"\\s";let n="";for(let r=0;r<t.set.length;r++){var o;n+=(o=t.set[r]).type===i.types.CHAR?l(o.value):o.type===i.types.RANGE?`${l(o.from)}-${l(o.to)}`:e(o,!0)}let s=`${t.not?"^":""}${n}`;return r?s:`[${s}]`}},84201,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.reconstruct=void 0;let n=e.r(26821),o=e.r(39031),s=e=>e.map(r.reconstruct).join(""),i=e=>{if("options"in e)return e.options.map(s).join("|");if("stack"in e)return s(e.stack);throw Error("options or stack must be Root or Group token")};r.reconstruct=e=>{switch(e.type){case n.types.ROOT:return i(e);case n.types.CHAR:{let t=String.fromCharCode(e.value);return(/[[\\{}$^.|?*+()]/.test(t)?"\\":"")+t}case n.types.POSITION:if("^"===e.value||"$"===e.value)return e.value;return`\\${e.value}`;case n.types.REFERENCE:return`\\${e.value}`;case n.types.SET:return o.writeSetTokens(e);case n.types.GROUP:{let t=e.remember?"":e.followedBy?"?=":e.notFollowedBy?"?!":"?:";return`(${t}${i(e)})`}case n.types.REPETITION:{let t,{min:n,max:o}=e;return t=0===n&&1===o?"?":1===n&&o===1/0?"+":0===n&&o===1/0?"*":o===1/0?`{${n},}`:n===o?`{${n}}`:`{${n},${o}}`,`${r.reconstruct(e.value)}${t}`}case n.types.RANGE:return`${o.setChar(e.from)}-${o.setChar(e.to)}`;default:throw Error(`Invalid token type ${e}`)}}},35859,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.types=void 0;let s=e.r(26821);Object.defineProperty(r,"types",{enumerable:!0,get:function(){return s.types}}),o(e.r(90793),r),o(e.r(84201),r);let i=e.r(90793),a=e.r(84201);o(e.r(26821),r),r.default=i.tokenizer,t.exports=i.tokenizer,t.exports.types=s.types,t.exports.reconstruct=a.reconstruct},56468,(e,t,r)=>{"use strict";let n=e.r(35859),o=n.types;function s(e,t){var r;t||(t={});let s=void 0===t.limit?25:t.limit;(r=e,"[object RegExp]"===({}).toString.call(r))?e=e.source:"string"!=typeof e&&(e=String(e));try{e=n(e)}catch(e){return!1}let i=0;return function e(t,r){let n,a;if(t.type===o.REPETITION&&(r++,i++,r>1||i>s))return!1;if(t.options){for(n=0,a=t.options.length;n<a;n++)if(!e({stack:t.options[n]},r))return!1}let l=t.stack||t.value&&t.value.stack;if(!l)return!0;for(n=0;n<l.length;n++)if(!e(l[n],r))return!1;return!0}(e,0)}t.exports=s,t.exports.default=s,t.exports.safeRegex=s},48624,(e,t,r)=>{"use strict";t.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(o=n;0!=o--;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(o=n;0!=o--;)if(!Object.prototype.hasOwnProperty.call(r,s[o]))return!1;for(o=n;0!=o--;){var n,o,s,i=s[o];if(!e(t[i],r[i]))return!1}return!0}return t!=t&&r!=r}},20884,(e,t,r)=>{"use strict";t.exports={name:"__fmw_internal_strategy_merged_tree_http_method__",storage:function(){let e={};return{get:t=>e[t]||null,set:(t,r)=>{e[t]=r}}},deriveConstraint:e=>e.method,mustMatchWhenDerived:!0}},9829,(e,t,r)=>{"use strict";let n=e.r(48624),o=e.r(20884),s=Symbol("treeData");function i(e){let t={...e.opts.constraints},r=t[o.name];return delete t[o.name],{...e,method:r,opts:{constraints:t}}}function a(e){let t=` (${e.method})`,r=e.opts.constraints||{};return 0!==Object.keys(r).length&&(t+=" "+JSON.stringify(r)),t+=function(e){let t="";for(let[r,n]of Object.entries(e))t+=`
• (${r}) ${n}`;return t}(e.metaData)}t.exports={prettyPrintTree:function(e,t){let r={};return!function e(t,r,o,l){var u,c,h;let d;if((t.isLeafNode||!1!==l.commonPrefix)&&(r=r[o=o||"(empty root node)"]={},t.isLeafNode&&(r[s]=(u=t,c=o,h=l,d=u.routes,void 0===h.method&&(d=d.map(i)),d=d.map(e=>(e.metaData=function(e,t){if(!t.includeMeta)return{};let r=t.buildPrettyMeta(e),n={},o=t.includeMeta;for(let e of(Array.isArray(o)||(o=Reflect.ownKeys(r)),o)){if(!Object.prototype.hasOwnProperty.call(r,e))continue;let t=e.toString(),o=r[e];if(null!=o){let e=JSON.stringify(function e(t){if(Array.isArray(t))return t.map(t=>e(t));if("symbol"==typeof t)return t.toString();if("function"==typeof t)return((t.name||"").replace("bound","").trim()||"anonymous")+"()";return t}(o));n[t]=e}}return n}(e,h),e)),void 0===h.method&&(d=d.reduce((e,t)=>{for(let r of e)if(n(t.opts.constraints,r.opts.constraints)&&n(t.metaData,r.metaData))return r.method+=", "+t.method,e;return e.push(t),e},[])),d.map(a).join(`
${c}`))),o=""),t.staticChildren)for(let n of Object.values(t.staticChildren))e(n,r,o+n.prefix,l);if(t.parametricChildren)for(let n of Object.values(t.parametricChildren)){let t=Array.from(n.nodePaths).join("|");e(n,r,o+t,l)}t.wildcardChild&&e(t.wildcardChild,r,"*",l)}(e,r,e.prefix,t),function e(t,r=""){let n="",o=Object.keys(t);for(let i=0;i<o.length;i++){let a=o[i],l=t[a],u=i===o.length-1,c=u?"└── ":"├── ",h=u?"    ":"│   ",d=(l[s]||"").split("\n").join("\n"+r+h);n+=r+c+a+d+"\n",n+=e(l,r+h)}return n}(r)}}},48451,(e,t,r)=>{"use strict";let n=e.r(20884);t.exports=class{constructor(){this.unconstrainedHandler=null,this.constraints=[],this.handlers=[],this.constrainedHandlerStores=null}getMatchingHandler(e){return void 0===e?this.unconstrainedHandler:this._getHandlerMatchingConstraints(e)}addHandler(e,t){let r=t.params,o=t.opts.constraints||{},s={params:r,constraints:o,handler:t.handler,store:t.store||null,_createParamsObject:this._compileCreateParamsObject(r)},i=Object.keys(o);for(let e of(0===i.length&&(this.unconstrainedHandler=s),i))this.constraints.includes(e)||("version"===e?this.constraints.unshift(e):this.constraints.push(e));let a=i.includes(n.name);if(!a&&this.handlers.length>=31)throw Error("find-my-way supports a maximum of 31 route handlers per node when there are constraints, limit reached");this.handlers.push(s),this.handlers.sort((e,t)=>Object.keys(e.constraints).length-Object.keys(t.constraints).length),a||this._compileGetHandlerMatchingConstraints(e,o)}_compileCreateParamsObject(e){let t=[];for(let r=0;r<e.length;r++)t.push(`'${e[r]}': paramsArray[${r}]`);return Function("paramsArray",`return {${t.join(",")}}`)}_getHandlerMatchingConstraints(){return null}_buildConstraintStore(e,t){for(let r=0;r<this.handlers.length;r++){let n=this.handlers[r].constraints[t];if(void 0!==n){let t=e.get(n)||0;t|=1<<r,e.set(n,t)}}}_constrainedIndexBitmask(e){let t=0;for(let r=0;r<this.handlers.length;r++)void 0!==this.handlers[r].constraints[e]&&(t|=1<<r);return~t}_compileGetHandlerMatchingConstraints(e){for(let t of(this.constrainedHandlerStores={},this.constraints)){let r=e.newStoreForConstraint(t);this.constrainedHandlerStores[t]=r,this._buildConstraintStore(r,t)}let t=[];for(let r of(t.push(`
    let candidates = ${(1<<this.handlers.length)-1}
    let mask, matches
    `),this.constraints)){t.push(`
      mask = ${this._constrainedIndexBitmask(r)}
      value = derivedConstraints.${r}
      `);let n=e.strategies[r].mustMatchWhenDerived?"matches":"(matches | mask)";t.push(`
      if (value === undefined) {
        candidates &= mask
      } else {
        matches = this.constrainedHandlerStores.${r}.get(value) || 0
        candidates &= ${n}
      }
      if (candidates === 0) return null;
      `)}for(let r in e.strategies)e.strategies[r].mustMatchWhenDerived&&!this.constraints.includes(r)&&t.push(`if (derivedConstraints.${r} !== undefined) return null`);t.push("return this.handlers[Math.floor(Math.log2(candidates))]"),this._getHandlerMatchingConstraints=Function("derivedConstraints",t.join("\n"))}}},87949,(e,t,r)=>{"use strict";let n=e.r(48451),o={STATIC:0,PARAMETRIC:1,WILDCARD:2};class s{constructor(){this.isLeafNode=!1,this.routes=null,this.handlerStorage=null}addRoute(e,t){null===this.routes&&(this.routes=[]),null===this.handlerStorage&&(this.handlerStorage=new n),this.isLeafNode=!0,this.routes.push(e),this.handlerStorage.addHandler(t,e)}}class i extends s{constructor(){super(),this.staticChildren={}}findStaticMatchingChild(e,t){let r=this.staticChildren[e.charAt(t)];return void 0!==r&&r.matchPrefix(e,t)?r:null}getStaticChild(e,t=0){if(e.length===t)return this;let r=this.findStaticMatchingChild(e,t);return r?r.getStaticChild(e,t+r.prefix.length):null}createStaticChild(e){if(0===e.length)return this;let t=this.staticChildren[e.charAt(0)];if(t){let r=1;for(;r<t.prefix.length;r++)if(e.charCodeAt(r)!==t.prefix.charCodeAt(r)){t=t.split(this,r);break}return t.createStaticChild(e.slice(r))}let r=e.charAt(0);return this.staticChildren[r]=new a(e),this.staticChildren[r]}}class a extends i{constructor(e){super(),this.prefix=e,this.wildcardChild=null,this.parametricChildren=[],this.kind=o.STATIC,this._compilePrefixMatch()}getParametricChild(e){let t=e&&e.source,r=this.parametricChildren.find(e=>(e.regex&&e.regex.source)===t);return r||null}createParametricChild(e,t,r){let n=this.getParametricChild(e);return n?n.nodePaths.add(r):(n=new l(e,t,r),this.parametricChildren.push(n),this.parametricChildren.sort((e,t)=>e.isRegex?t.isRegex?null===e.staticSuffix?1:null===t.staticSuffix?-1:t.staticSuffix.endsWith(e.staticSuffix)?1:e.staticSuffix.endsWith(t.staticSuffix)?-1:0:-1:1)),n}getWildcardChild(){return this.wildcardChild}createWildcardChild(){return this.wildcardChild=this.getWildcardChild()||new u,this.wildcardChild}split(e,t){let r=this.prefix.slice(0,t),n=this.prefix.slice(t);this.prefix=n,this._compilePrefixMatch();let o=new a(r);return o.staticChildren[n.charAt(0)]=this,e.staticChildren[r.charAt(0)]=o,o}getNextNode(e,t,r,n){let o=this.findStaticMatchingChild(e,t),s=0;if(null===o){if(0===this.parametricChildren.length)return this.wildcardChild;o=this.parametricChildren[0],s=1}null!==this.wildcardChild&&r.push({paramsCount:n,brotherPathIndex:t,brotherNode:this.wildcardChild});for(let e=this.parametricChildren.length-1;e>=s;e--)r.push({paramsCount:n,brotherPathIndex:t,brotherNode:this.parametricChildren[e]});return o}_compilePrefixMatch(){if(1===this.prefix.length){this.matchPrefix=()=>!0;return}let e=[];for(let t=1;t<this.prefix.length;t++){let r=this.prefix.charCodeAt(t);e.push(`path.charCodeAt(i + ${t}) === ${r}`)}this.matchPrefix=Function("path","i",`return ${e.join(" && ")}`)}}class l extends i{constructor(e,t,r){super(),this.isRegex=!!e,this.regex=e||null,this.staticSuffix=t||null,this.kind=o.PARAMETRIC,this.nodePaths=new Set([r])}getNextNode(e,t){return this.findStaticMatchingChild(e,t)}}class u extends s{constructor(){super(),this.kind=o.WILDCARD}getNextNode(){return null}}t.exports={StaticNode:a,ParametricNode:l,WildcardNode:u,NODE_TYPES:o}},95164,(e,t,r)=>{"use strict";let n=e.r(57328);function o(){if(!(this instanceof o))return new o;this.store={},this.maxMajor=0,this.maxMinors={},this.maxPatches={}}o.prototype.set=function(e,t){if("string"!=typeof e)throw TypeError("Version should be a string");let[r,n,o]=e.split(".");if(isNaN(r))throw TypeError("Major version must be a numeric value");return r=Number(r),n=Number(n)||0,o=Number(o)||0,r>=this.maxMajor&&(this.maxMajor=r,this.store.x=t,this.store["*"]=t,this.store["x.x"]=t,this.store["x.x.x"]=t),n>=(this.maxMinors[r]||0)&&(this.maxMinors[r]=n,this.store[`${r}.x`]=t,this.store[`${r}.x.x`]=t),o>=(this.maxPatches[`${r}.${n}`]||0)&&(this.maxPatches[`${r}.${n}`]=o,this.store[`${r}.${n}.x`]=t),this.store[`${r}.${n}.${o}`]=t,this},o.prototype.get=function(e){return this.store[e]},t.exports={name:"version",mustMatchWhenDerived:!0,storage:o,validate(e){n("string"==typeof e,"Version should be a string")}}},1280,(e,t,r)=>{"use strict";let n=e.r(57328);t.exports={name:"host",mustMatchWhenDerived:!1,storage:function(){let e={},t=[];return{get:r=>{let n=e[r];if(n)return n;for(let e of t)if(e.host.test(r))return e.value},set:(r,n)=>{r instanceof RegExp?t.push({host:r,value:n}):e[r]=n}}},validate(e){n("string"==typeof e||"[object RegExp]"===Object.prototype.toString.call(e),"Host should be a string or a RegExp")}}},71095,(e,t,r)=>{"use strict";let n=e.r(95164),o=e.r(1280),s=e.r(57328);t.exports=class{constructor(e){if(this.strategies={version:n,host:o},this.strategiesInUse=new Set,this.asyncStrategiesInUse=new Set,e)for(const t of Object.values(e))this.addConstraintStrategy(t)}isStrategyUsed(e){return this.strategiesInUse.has(e)||this.asyncStrategiesInUse.has(e)}hasConstraintStrategy(e){let t=this.strategies[e];return void 0!==t&&(t.isCustom||this.isStrategyUsed(e))}addConstraintStrategy(e){if(s("string"==typeof e.name&&""!==e.name,"strategy.name is required."),s(e.storage&&"function"==typeof e.storage,"strategy.storage function is required."),s(e.deriveConstraint&&"function"==typeof e.deriveConstraint,"strategy.deriveConstraint function is required."),this.strategies[e.name]&&this.strategies[e.name].isCustom)throw Error(`There already exists a custom constraint with the name ${e.name}.`);if(this.isStrategyUsed(e.name))throw Error(`There already exists a route with ${e.name} constraint.`);e.isCustom=!0,e.isAsync=3===e.deriveConstraint.length,this.strategies[e.name]=e,e.mustMatchWhenDerived&&this.noteUsage({[e.name]:e})}deriveConstraints(e,t,r){let n=this.deriveSyncConstraints(e,t);if(void 0===r)return n;this.deriveAsyncConstraints(n,e,t,r)}deriveSyncConstraints(e,t){}noteUsage(e){if(e){let t=this.strategiesInUse.size;for(let t in e)this.strategies[t].isAsync?this.asyncStrategiesInUse.add(t):this.strategiesInUse.add(t);t!==this.strategiesInUse.size&&this._buildDeriveConstraints()}}newStoreForConstraint(e){if(!this.strategies[e])throw Error(`No strategy registered for constraint key ${e}`);return this.strategies[e].storage()}validateConstraints(e){for(let t in e){let r=e[t];if(void 0===r)throw Error("Can't pass an undefined constraint value, must pass null or no key at all");let n=this.strategies[t];if(!n)throw Error(`No strategy registered for constraint key ${t}`);n.validate&&n.validate(r)}}deriveAsyncConstraints(e,t,r,n){let o=this.asyncStrategiesInUse.size;if(0===o)return void n(null,e);for(let s of(e=e||{},this.asyncStrategiesInUse))this.strategies[s].deriveConstraint(t,r,(t,r)=>{null!==t?n(t):(e[s]=r,0==--o&&n(null,e))})}_buildDeriveConstraints(){if(0===this.strategiesInUse.size)return;let e=["return {"];for(let t of this.strategiesInUse){let r=this.strategies[t];r.isCustom?e.push(`  ${r.name}: this.strategies.${t}.deriveConstraint(req, ctx),`):"version"===t?e.push("   version: req.headers['accept-version'],"):e.push("   host: req.headers.host || req.headers[':authority'],")}e.push("}"),this.deriveSyncConstraints=Function("req","ctx",e.join("\n")).bind(this)}}},33102,(e,t,r)=>{"use strict";t.exports=["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"]},59663,(e,t,r)=>{"use strict";function n(e,t){return 50===e?53===t?"%":51===t?"#":52===t?"$":54===t?"&":66===t||98===t?"+":67===t||99===t?",":70===t||102===t?"/":null:51===e?65===t||97===t?":":66===t||98===t?";":68===t||100===t?"=":70===t||102===t?"?":null:52===e&&48===t?"@":null}t.exports={safeDecodeURI:function(e,t){let r=!1,o=!1,s="";for(let i=1;i<e.length;i++){let a=e.charCodeAt(i);if(37===a){let t=e.charCodeAt(i+1),s=e.charCodeAt(i+2);null===n(t,s)?r=!0:(o=!0,50===t&&53===s&&(r=!0,e=e.slice(0,i+1)+"25"+e.slice(i+1),i+=2),i+=2)}else if(63===a||35===a||59===a&&t){s=e.slice(i+1),e=e.slice(0,i);break}}return{path:r?decodeURI(e):e,querystring:s,shouldDecodeParam:o}},safeDecodeURIComponent:function(e){let t=e.indexOf("%");if(-1===t)return e;let r="",o=t;for(let s=t;s<e.length;s++)if(37===e.charCodeAt(s)){let t=n(e.charCodeAt(s+1),e.charCodeAt(s+2));r+=e.slice(o,s)+t,o=s+3}return e.slice(0,t)+r+e.slice(o)}}},25689,(e,t,r)=>{"use strict";let n=e.r(57328),o=e.r(65253),s=e.r(56468),i=e.r(48624),{prettyPrintTree:a}=e.r(9829),{StaticNode:l,NODE_TYPES:u}=e.r(87949),c=e.r(71095),h=e.r(33102),d=e.r(20884),{safeDecodeURI:f,safeDecodeURIComponent:p}=e.r(59663),y=/^https?:\/\/.*?\//,_=/(\/:[^/()]*?)\?(\/?)/;if(!s(y))throw Error("the FULL_PATH_REGEXP is not safe, update this module");if(!s(_))throw Error("the OPTIONAL_PARAM_REGEXP is not safe, update this module");function R(e){if(!(this instanceof R))return new R(e);e=e||{},this._opts=e,e.defaultRoute?(n("function"==typeof e.defaultRoute,"The default route must be a function"),this.defaultRoute=e.defaultRoute):this.defaultRoute=null,e.onBadUrl?(n("function"==typeof e.onBadUrl,"The bad url handler must be a function"),this.onBadUrl=e.onBadUrl):this.onBadUrl=null,e.buildPrettyMeta?(n("function"==typeof e.buildPrettyMeta,"buildPrettyMeta must be a function"),this.buildPrettyMeta=e.buildPrettyMeta):this.buildPrettyMeta=O,e.querystringParser?(n("function"==typeof e.querystringParser,"querystringParser must be a function"),this.querystringParser=e.querystringParser):this.querystringParser=e=>""===e?{}:o.parse(e),this.caseSensitive=void 0===e.caseSensitive||e.caseSensitive,this.ignoreTrailingSlash=e.ignoreTrailingSlash||!1,this.ignoreDuplicateSlashes=e.ignoreDuplicateSlashes||!1,this.maxParamLength=e.maxParamLength||100,this.allowUnsafeRegex=e.allowUnsafeRegex||!1,this.constrainer=new c(e.constraints),this.useSemicolonDelimiter=e.useSemicolonDelimiter||!1,this.routes=[],this.trees={}}for(let e in R.prototype.on=function(e,t,r,o,s){"function"==typeof r&&(void 0!==o&&(s=o),o=r,r={}),n("string"==typeof t,"Path should be a string"),n(t.length>0,"The path could not be empty"),n("/"===t[0]||"*"===t[0],"The first character of a path should be `/` or `*`"),n("function"==typeof o,"Handler should be a function");let i=t.match(_);if(i){n(t.length===i.index+i[0].length,"Optional Parameter needs to be the last parameter of the path");let a=t.replace(_,"$1$2"),l=t.replace(_,"$2")||"/";this.on(e,a,r,o,s),this.on(e,l,r,o,s);return}let a=t;for(let i of(this.ignoreDuplicateSlashes&&(t=E(t)),this.ignoreTrailingSlash&&(t=S(t)),Array.isArray(e)?e:[e]))n("string"==typeof i,"Method should be a string"),n(h.includes(i),`Method '${i}' is not an http method.`),this._on(i,t,r,o,s,a)},R.prototype._on=function(e,t,r,o,a){let u={};void 0!==r.constraints&&(n("object"==typeof r.constraints&&null!==r.constraints,"Constraints should be an object"),0!==Object.keys(r.constraints).length&&(u=r.constraints)),this.constrainer.validateConstraints(u),this.constrainer.noteUsage(u),void 0===this.trees[e]&&(this.trees[e]=new l("/"));let c=t;if("*"===c&&0!==this.trees[e].prefix.length){let t=this.trees[e];this.trees[e]=new l(""),this.trees[e].staticChildren["/"]=t}let h=this.trees[e],d=h.prefix.length,f=[];for(let e=0;e<=c.length;e++){if(58===c.charCodeAt(e)&&58===c.charCodeAt(e+1)){e++;continue}let t=58===c.charCodeAt(e)&&58!==c.charCodeAt(e+1),r=42===c.charCodeAt(e);if(t||r||e===c.length&&e!==d){let t=c.slice(d,e);this.caseSensitive||(t=t.toLowerCase()),t=(t=t.split("::").join(":")).split("%").join("%25"),h=h.createStaticChild(t)}if(t){let t=!1,r=!0,o="",i=[],a=e+1;for(let l=a;;l++){let u=c.charCodeAt(l),p=40===u,y=45===u||46===u,_=47===u||l===c.length;if(p||y||_){let u=c.slice(a,l);if(f.push(u),t=t||p||y,p){let e=m(c,l),t=c.slice(l,e+1);this.allowUnsafeRegex||n(s(new RegExp(t)),`The regex '${t}' is not safe!`),i.push(T(t)),l=e+1,r=!0}else i.push(r?"(.*?)":`(${o}|(?:(?!${o}).)*)`),r=!1;let R=l;for(;l<c.length;l++){let e=c.charCodeAt(l);if(47===e)break;if(58===e)if(58===c.charCodeAt(l+1))l++;else break}let E=c.slice(R,l);if(E&&(E=(E=E.split("::").join(":")).split("%").join("%25"),i.push(o=g(E))),a=l+1,_||47===c.charCodeAt(l)||l===c.length){let r=t?"()"+E:E,n=c.slice(e,l);c=c.slice(0,e+1)+r+c.slice(l),e+=r.length;let o=t?RegExp("^"+i.join("")+"$"):null;h=h.createParametricChild(o,E||null,n),d=e+1;break}}}}else if(r&&(f.push("*"),h=h.createWildcardChild(),d=e+1,e!==c.length-1))throw Error("Wildcard must be the last character in the route")}for(let t of(this.caseSensitive||(c=c.toLowerCase()),"*"===c&&(c="/*"),this.routes)){let r=t.opts.constraints||{};if(t.method===e&&t.pattern===c&&i(r,u))throw Error(`Method '${e}' already declared for route '${c}' with constraints '${JSON.stringify(u)}'`)}let p={method:e,path:t,pattern:c,params:f,opts:r,handler:o,store:a};this.routes.push(p),h.addRoute(p,this.constrainer)},R.prototype.hasRoute=function(e,t,r){return null!==this.findRoute(e,t,r)},R.prototype.findRoute=function(e,t,r={}){if(void 0===this.trees[e])return null;let o=t,a=this.trees[e],l=a.prefix.length,u=[];for(let e=0;e<=o.length;e++){if(58===o.charCodeAt(e)&&58===o.charCodeAt(e+1)){e++;continue}let t=58===o.charCodeAt(e)&&58!==o.charCodeAt(e+1),r=42===o.charCodeAt(e);if(t||r||e===o.length&&e!==l){let t=o.slice(l,e);if(this.caseSensitive||(t=t.toLowerCase()),t=(t=t.split("::").join(":")).split("%").join("%25"),null===(a=a.getStaticChild(t)))return null}if(t){let t=!1,r=!0,i="",c=[],h=e+1;for(let d=h;;d++){let f=o.charCodeAt(d),p=40===f,y=45===f||46===f,_=47===f||d===o.length;if(p||y||_){let f=o.slice(h,d);if(u.push(f),t=t||p||y,p){let e=m(o,d),t=o.slice(d,e+1);this.allowUnsafeRegex||n(s(new RegExp(t)),`The regex '${t}' is not safe!`),c.push(T(t)),d=e+1,r=!1}else c.push(r?"(.*?)":`(${i}|(?:(?!${i}).)*)`),r=!1;let R=d;for(;d<o.length;d++){let e=o.charCodeAt(d);if(47===e)break;if(58===e)if(58===o.charCodeAt(d+1))d++;else break}let E=o.slice(R,d);if(E&&(E=(E=E.split("::").join(":")).split("%").join("%25"),c.push(i=g(E))),h=d+1,_||47===o.charCodeAt(d)||d===o.length){let r=t?"()"+E:E,n=o.slice(e,d);o=o.slice(0,e+1)+r+o.slice(d),e+=r.length;let s=t?RegExp("^"+c.join("")+"$"):null;if(null===(a=a.getParametricChild(s,E||null,n)))return null;l=e+1;break}}}}else if(r&&(u.push("*"),a=a.getWildcardChild(),l=e+1,e!==o.length-1))throw Error("Wildcard must be the last character in the route")}for(let t of(this.caseSensitive||(o=o.toLowerCase()),this.routes)){let n=t.opts.constraints||{};if(t.method===e&&t.pattern===o&&i(n,r))return{handler:t.handler,store:t.store,params:t.params}}return null},R.prototype.hasConstraintStrategy=function(e){return this.constrainer.hasConstraintStrategy(e)},R.prototype.addConstraintStrategy=function(e){this.constrainer.addConstraintStrategy(e),this._rebuild(this.routes)},R.prototype.reset=function(){this.trees={},this.routes=[]},R.prototype.off=function(e,t,r){n("string"==typeof t,"Path should be a string"),n(t.length>0,"The path could not be empty"),n("/"===t[0]||"*"===t[0],"The first character of a path should be `/` or `*`"),n(void 0===r||"object"==typeof r&&!Array.isArray(r)&&null!==r,"Constraints should be an object or undefined.");let o=t.match(_);if(o){n(t.length===o.index+o[0].length,"Optional Parameter needs to be the last parameter of the path");let s=t.replace(_,"$1$2"),i=t.replace(_,"$2");this.off(e,s,r),this.off(e,i,r);return}for(let n of(this.ignoreDuplicateSlashes&&(t=E(t)),this.ignoreTrailingSlash&&(t=S(t)),Array.isArray(e)?e:[e]))this._off(n,t,r)},R.prototype._off=function(e,t,r){function o(r){return e!==r.method||t!==r.path}n("string"==typeof e,"Method should be a string"),n(h.includes(e),`Method '${e}' is not an http method.`);let s=r?function(e){return o(e)||!i(r,e.opts.constraints||{})}:o,a=this.routes.filter(s);this._rebuild(a)},R.prototype.lookup=function(e,t,r,n){if("function"==typeof r&&(n=r,r=void 0),void 0===n){let n=this.constrainer.deriveConstraints(e,r),o=this.find(e.method,e.url,n);return this.callHandler(o,e,t,r)}this.constrainer.deriveConstraints(e,r,(o,s)=>{if(null!==o)return void n(o);try{let o=this.find(e.method,e.url,s),i=this.callHandler(o,e,t,r);n(null,i)}catch(e){n(e)}})},R.prototype.callHandler=function(e,t,r,n){return null===e?this._defaultRoute(t,r,n):void 0===n?e.handler(t,r,e.params,e.store,e.searchParams):e.handler.call(n,t,r,e.params,e.store,e.searchParams)},R.prototype.find=function(e,t,r){let n,o,s,i=this.trees[e];if(void 0===i)return null;47!==t.charCodeAt(0)&&(t=t.replace(y,"/")),this.ignoreDuplicateSlashes&&(t=E(t));try{t=(n=f(t,this.useSemicolonDelimiter)).path,o=n.querystring,s=n.shouldDecodeParam}catch(e){return this._onBadUrl(t)}this.ignoreTrailingSlash&&(t=S(t));let a=t;!1===this.caseSensitive&&(t=t.toLowerCase());let l=this.maxParamLength,c=i.prefix.length,h=[],d=t.length,_=[];for(;;){if(c===d&&i.isLeafNode){let e=i.handlerStorage.getMatchingHandler(r);if(null!==e)return{handler:e.handler,store:e.store,params:e._createParamsObject(h),searchParams:this.querystringParser(o)}}let e=i.getNextNode(t,c,_,h.length);if(null===e){if(0===_.length)return null;let t=_.pop();c=t.brotherPathIndex,h.splice(t.paramsCount),e=t.brotherNode}if((i=e).kind===u.STATIC){c+=i.prefix.length;continue}if(i.kind===u.WILDCARD){let e=a.slice(c);s&&(e=p(e)),h.push(e),c=d;continue}let n=a.indexOf("/",c);-1===n&&(n=d);let f=a.slice(c,n);if(s&&(f=p(f)),i.isRegex){let e=i.regex.exec(f);if(null===e)continue;for(let t=1;t<e.length;t++){let r=e[t];if(r.length>l)return null;h.push(r)}}else{if(f.length>l)return null;h.push(f)}c=n}},R.prototype._rebuild=function(e){for(let t of(this.reset(),e)){let{method:e,path:r,opts:n,handler:o,store:s}=t;this._on(e,r,n,o,s)}},R.prototype._defaultRoute=function(e,t,r){if(null!==this.defaultRoute)return void 0===r?this.defaultRoute(e,t):this.defaultRoute.call(r,e,t);t.statusCode=404,t.end()},R.prototype._onBadUrl=function(e){if(null===this.onBadUrl)return null;let t=this.onBadUrl;return{handler:(r,n,o)=>t(e,r,n),params:{},store:null}},R.prototype.prettyPrint=function(e={}){let t=e.method;e.buildPrettyMeta=this.buildPrettyMeta.bind(this);let r=null;if(void 0===t){let{version:e,host:t,...n}=this.constrainer.strategies;n[d.name]=d;let o=new R({...this._opts,constraints:n}),s=this.routes.map(e=>{let t={...e.opts.constraints,[d.name]:e.method};return{...e,method:"MERGED",opts:{constraints:t}}});o._rebuild(s),r=o.trees.MERGED}else r=this.trees[t];return null==r?"(empty tree)":a(r,e)},h){if(!h.hasOwnProperty(e))continue;let t=h[e],r=t.toLowerCase();R.prototype[r]=function(e,r,n){return this.on(t,e,r,n)}}function g(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function E(e){return e.replace(/\/\/+/g,"/")}function S(e){return e.length>1&&47===e.charCodeAt(e.length-1)?e.slice(0,-1):e}function T(e){return 94===e.charCodeAt(1)&&(e=e.slice(0,1)+e.slice(2)),36===e.charCodeAt(e.length-2)&&(e=e.slice(0,e.length-2)+e.slice(e.length-1)),e}function m(e,t){let r=1;for(;t<e.length;){if("\\"===e[++t]){t++;continue}if(")"===e[t]?r--:"("===e[t]&&r++,!r)return t}throw TypeError('Invalid regexp expression in "'+e+'"')}function O(e){return e&&e.store?Object.assign({},e.store):{}}R.prototype.all=function(e,t,r){this.on(h,e,t,r)},t.exports=R},40940,(e,t,r)=>{"use strict";t.exports={kAvvioBoot:Symbol("fastify.avvioBoot"),kChildren:Symbol("fastify.children"),kServerBindings:Symbol("fastify.serverBindings"),kBodyLimit:Symbol("fastify.bodyLimit"),kRoutePrefix:Symbol("fastify.routePrefix"),kLogLevel:Symbol("fastify.logLevel"),kLogSerializers:Symbol("fastify.logSerializers"),kHooks:Symbol("fastify.hooks"),kContentTypeParser:Symbol("fastify.contentTypeParser"),kState:Symbol("fastify.state"),kOptions:Symbol("fastify.options"),kDisableRequestLogging:Symbol("fastify.disableRequestLogging"),kPluginNameChain:Symbol("fastify.pluginNameChain"),kRouteContext:Symbol("fastify.context"),kPublicRouteContext:Symbol("fastify.routeOptions"),kGenReqId:Symbol("fastify.genReqId"),kSchemaController:Symbol("fastify.schemaController"),kSchemaHeaders:Symbol("headers-schema"),kSchemaParams:Symbol("params-schema"),kSchemaQuerystring:Symbol("querystring-schema"),kSchemaBody:Symbol("body-schema"),kSchemaResponse:Symbol("response-schema"),kSchemaErrorFormatter:Symbol("fastify.schemaErrorFormatter"),kSchemaVisited:Symbol("fastify.schemas.visited"),kRequest:Symbol("fastify.Request"),kRequestPayloadStream:Symbol("fastify.RequestPayloadStream"),kRequestAcceptVersion:Symbol("fastify.RequestAcceptVersion"),kRequestCacheValidateFns:Symbol("fastify.request.cache.validateFns"),kRequestOriginalUrl:Symbol("fastify.request.originalUrl"),kFourOhFour:Symbol("fastify.404"),kCanSetNotFoundHandler:Symbol("fastify.canSetNotFoundHandler"),kFourOhFourLevelInstance:Symbol("fastify.404LogLevelInstance"),kFourOhFourContext:Symbol("fastify.404ContextKey"),kDefaultJsonParse:Symbol("fastify.defaultJSONParse"),kReply:Symbol("fastify.Reply"),kReplySerializer:Symbol("fastify.reply.serializer"),kReplyIsError:Symbol("fastify.reply.isError"),kReplyHeaders:Symbol("fastify.reply.headers"),kReplyTrailers:Symbol("fastify.reply.trailers"),kReplyHasStatusCode:Symbol("fastify.reply.hasStatusCode"),kReplyHijacked:Symbol("fastify.reply.hijacked"),kReplyStartTime:Symbol("fastify.reply.startTime"),kReplyNextErrorHandler:Symbol("fastify.reply.nextErrorHandler"),kReplyEndTime:Symbol("fastify.reply.endTime"),kReplyErrorHandlerCalled:Symbol("fastify.reply.errorHandlerCalled"),kReplyIsRunningOnErrorHook:Symbol("fastify.reply.isRunningOnErrorHook"),kReplySerializerDefault:Symbol("fastify.replySerializerDefault"),kReplyCacheSerializeFns:Symbol("fastify.reply.cache.serializeFns"),kTestInternals:Symbol("fastify.testInternals"),kErrorHandler:Symbol("fastify.errorHandler"),kChildLoggerFactory:Symbol("fastify.childLoggerFactory"),kHasBeenDecorated:Symbol("fastify.hasBeenDecorated"),kKeepAliveConnections:Symbol("fastify.keepAliveConnections"),kRouteByFastify:Symbol("fastify.routeByFastify")}},30688,(e,t,r)=>{"use strict";let{kFourOhFourContext:n,kReplySerializerDefault:o,kSchemaErrorFormatter:s,kErrorHandler:i,kChildLoggerFactory:a,kOptions:l,kReply:u,kRequest:c,kBodyLimit:h,kLogLevel:d,kContentTypeParser:f,kRouteByFastify:p,kRequestCacheValidateFns:y,kReplyCacheSerializeFns:_,kPublicRouteContext:R}=e.r(40940);function g(e,t){let r="";for(var n=0;n!==e.length;++n){let o=e[n];r+=t+(o.instancePath||"")+" "+o.message+", "}return Error(r.slice(0,-2))}t.exports=function({schema:e,handler:t,config:r,requestIdLogLabel:E,childLoggerFactory:S,errorHandler:T,bodyLimit:m,logLevel:O,logSerializers:C,attachValidation:b,validatorCompiler:A,serializerCompiler:N,replySerializer:v,schemaErrorFormatter:I,exposeHeadRoute:P,prefixTrailingSlash:F,server:w,isFastify:D}){var L;this.schema=e,this.handler=t,this.Reply=w[u],this.Request=w[c],this.contentTypeParser=w[f],this.onRequest=null,this.onSend=null,this.onError=null,this.onTimeout=null,this.preHandler=null,this.onResponse=null,this.preSerialization=null,this.onRequestAbort=null,this.config=r,this.errorHandler=T||w[i],this.requestIdLogLabel=E||w[l].requestIdLogLabel,this.childLoggerFactory=S||w[a],this._middie=null,this._parserOptions={limit:m||w[h]},this.exposeHeadRoute=P,this.prefixTrailingSlash=F,this.logLevel=O||w[d],this.logSerializers=C,this[n]=null,this.attachValidation=b,this[o]=v,this.schemaErrorFormatter=I||w[s]||g,this[p]=D,this[y]=null,this[_]=null,this.validatorCompiler=A||null,this.serializerCompiler=N||null,this[R]=(L=this,Object.create(null,{schema:{enumerable:!0,get:()=>L.schema},config:{enumerable:!0,get:()=>L.config}})),this.server=w}},12057,(e,t,r)=>{t.exports=e.x("node:util",()=>require("node:util"))},43458,(e,t,r)=>{"use strict";let{format:n}=e.r(12057);function o(){return`${this.name} [${this.code}]: ${this.message}`}function s(e,t,r=500,i=Error){if(!e)throw Error("Fastify error code must not be empty");if(!t)throw Error("Fastify error message must not be empty");function a(...o){if(!new.target)return new a(...o);this.code=e,this.name="FastifyError",this.statusCode=r;let s=o.length-1;-1!==s&&o[s]&&"object"==typeof o[s]&&"cause"in o[s]&&(this.cause=o.pop().cause),this.message=n(t,...o),0!==Error.stackTraceLimit&&Error.captureStackTrace(this,a)}return e=e.toUpperCase(),r||(r=void 0),a.prototype=Object.create(i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),a.prototype[Symbol.toStringTag]="Error",a.prototype.toString=o,a}t.exports=s,t.exports.default=s,t.exports.createError=s},35635,(e,t,r)=>{"use strict";let n=e.r(43458),o={FST_ERR_NOT_FOUND:n("FST_ERR_NOT_FOUND","Not Found",404),FST_ERR_OPTIONS_NOT_OBJ:n("FST_ERR_OPTIONS_NOT_OBJ","Options must be an object",500,TypeError),FST_ERR_QSP_NOT_FN:n("FST_ERR_QSP_NOT_FN","querystringParser option should be a function, instead got '%s'",500,TypeError),FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN:n("FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN","schemaController.bucket option should be a function, instead got '%s'",500,TypeError),FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN:n("FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN","schemaErrorFormatter option should be a non async function. Instead got '%s'.",500,TypeError),FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ:n("FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ","ajv.customOptions option should be an object, instead got '%s'",500,TypeError),FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR:n("FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR","ajv.plugins option should be an array, instead got '%s'",500,TypeError),FST_ERR_VERSION_CONSTRAINT_NOT_STR:n("FST_ERR_VERSION_CONSTRAINT_NOT_STR","Version constraint should be a string.",500,TypeError),FST_ERR_VALIDATION:n("FST_ERR_VALIDATION","%s",400),FST_ERR_LISTEN_OPTIONS_INVALID:n("FST_ERR_LISTEN_OPTIONS_INVALID","Invalid listen options: '%s'",500,TypeError),FST_ERR_ERROR_HANDLER_NOT_FN:n("FST_ERR_ERROR_HANDLER_NOT_FN","Error Handler must be a function",500,TypeError),FST_ERR_CTP_ALREADY_PRESENT:n("FST_ERR_CTP_ALREADY_PRESENT","Content type parser '%s' already present."),FST_ERR_CTP_INVALID_TYPE:n("FST_ERR_CTP_INVALID_TYPE","The content type should be a string or a RegExp",500,TypeError),FST_ERR_CTP_EMPTY_TYPE:n("FST_ERR_CTP_EMPTY_TYPE","The content type cannot be an empty string",500,TypeError),FST_ERR_CTP_INVALID_HANDLER:n("FST_ERR_CTP_INVALID_HANDLER","The content type handler should be a function",500,TypeError),FST_ERR_CTP_INVALID_PARSE_TYPE:n("FST_ERR_CTP_INVALID_PARSE_TYPE","The body parser can only parse your data as 'string' or 'buffer', you asked '%s' which is not supported.",500,TypeError),FST_ERR_CTP_BODY_TOO_LARGE:n("FST_ERR_CTP_BODY_TOO_LARGE","Request body is too large",413,RangeError),FST_ERR_CTP_INVALID_MEDIA_TYPE:n("FST_ERR_CTP_INVALID_MEDIA_TYPE","Unsupported Media Type: %s",415),FST_ERR_CTP_INVALID_CONTENT_LENGTH:n("FST_ERR_CTP_INVALID_CONTENT_LENGTH","Request body size did not match Content-Length",400,RangeError),FST_ERR_CTP_EMPTY_JSON_BODY:n("FST_ERR_CTP_EMPTY_JSON_BODY","Body cannot be empty when content-type is set to 'application/json'",400),FST_ERR_CTP_INSTANCE_ALREADY_STARTED:n("FST_ERR_CTP_INSTANCE_ALREADY_STARTED",'Cannot call "%s" when fastify instance is already started!',400),FST_ERR_DEC_ALREADY_PRESENT:n("FST_ERR_DEC_ALREADY_PRESENT","The decorator '%s' has already been added!"),FST_ERR_DEC_DEPENDENCY_INVALID_TYPE:n("FST_ERR_DEC_DEPENDENCY_INVALID_TYPE","The dependencies of decorator '%s' must be of type Array.",500,TypeError),FST_ERR_DEC_MISSING_DEPENDENCY:n("FST_ERR_DEC_MISSING_DEPENDENCY","The decorator is missing dependency '%s'."),FST_ERR_DEC_AFTER_START:n("FST_ERR_DEC_AFTER_START","The decorator '%s' has been added after start!"),FST_ERR_HOOK_INVALID_TYPE:n("FST_ERR_HOOK_INVALID_TYPE","The hook name must be a string",500,TypeError),FST_ERR_HOOK_INVALID_HANDLER:n("FST_ERR_HOOK_INVALID_HANDLER","%s hook should be a function, instead got %s",500,TypeError),FST_ERR_HOOK_INVALID_ASYNC_HANDLER:n("FST_ERR_HOOK_INVALID_ASYNC_HANDLER","Async function has too many arguments. Async hooks should not use the 'done' argument.",500,TypeError),FST_ERR_HOOK_NOT_SUPPORTED:n("FST_ERR_HOOK_NOT_SUPPORTED","%s hook not supported!",500,TypeError),FST_ERR_MISSING_MIDDLEWARE:n("FST_ERR_MISSING_MIDDLEWARE","You must register a plugin for handling middlewares, visit fastify.dev/docs/latest/Reference/Middleware/ for more info.",500),FST_ERR_HOOK_TIMEOUT:n("FST_ERR_HOOK_TIMEOUT","A callback for '%s' hook timed out. You may have forgotten to call 'done' function or to resolve a Promise"),FST_ERR_LOG_INVALID_DESTINATION:n("FST_ERR_LOG_INVALID_DESTINATION","Cannot specify both logger.stream and logger.file options"),FST_ERR_LOG_INVALID_LOGGER:n("FST_ERR_LOG_INVALID_LOGGER","Invalid logger object provided. The logger instance should have these functions(s): '%s'.",500,TypeError),FST_ERR_REP_INVALID_PAYLOAD_TYPE:n("FST_ERR_REP_INVALID_PAYLOAD_TYPE","Attempted to send payload of invalid type '%s'. Expected a string or Buffer.",500,TypeError),FST_ERR_REP_RESPONSE_BODY_CONSUMED:n("FST_ERR_REP_RESPONSE_BODY_CONSUMED","Response.body is already consumed."),FST_ERR_REP_ALREADY_SENT:n("FST_ERR_REP_ALREADY_SENT",'Reply was already sent, did you forget to "return reply" in "%s" (%s)?'),FST_ERR_REP_SENT_VALUE:n("FST_ERR_REP_SENT_VALUE","The only possible value for reply.sent is true.",500,TypeError),FST_ERR_SEND_INSIDE_ONERR:n("FST_ERR_SEND_INSIDE_ONERR","You cannot use `send` inside the `onError` hook"),FST_ERR_SEND_UNDEFINED_ERR:n("FST_ERR_SEND_UNDEFINED_ERR","Undefined error has occurred"),FST_ERR_BAD_STATUS_CODE:n("FST_ERR_BAD_STATUS_CODE","Called reply with an invalid status code: %s"),FST_ERR_BAD_TRAILER_NAME:n("FST_ERR_BAD_TRAILER_NAME","Called reply.trailer with an invalid header name: %s"),FST_ERR_BAD_TRAILER_VALUE:n("FST_ERR_BAD_TRAILER_VALUE","Called reply.trailer('%s', fn) with an invalid type: %s. Expected a function."),FST_ERR_FAILED_ERROR_SERIALIZATION:n("FST_ERR_FAILED_ERROR_SERIALIZATION","Failed to serialize an error. Error: %s. Original error: %s"),FST_ERR_MISSING_SERIALIZATION_FN:n("FST_ERR_MISSING_SERIALIZATION_FN",'Missing serialization function. Key "%s"'),FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN:n("FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN",'Missing serialization function. Key "%s:%s"'),FST_ERR_REQ_INVALID_VALIDATION_INVOCATION:n("FST_ERR_REQ_INVALID_VALIDATION_INVOCATION",'Invalid validation invocation. Missing validation function for HTTP part "%s" nor schema provided.'),FST_ERR_SCH_MISSING_ID:n("FST_ERR_SCH_MISSING_ID","Missing schema $id property"),FST_ERR_SCH_ALREADY_PRESENT:n("FST_ERR_SCH_ALREADY_PRESENT","Schema with id '%s' already declared!"),FST_ERR_SCH_CONTENT_MISSING_SCHEMA:n("FST_ERR_SCH_CONTENT_MISSING_SCHEMA","Schema is missing for the content type '%s'"),FST_ERR_SCH_DUPLICATE:n("FST_ERR_SCH_DUPLICATE","Schema with '%s' already present!"),FST_ERR_SCH_VALIDATION_BUILD:n("FST_ERR_SCH_VALIDATION_BUILD","Failed building the validation schema for %s: %s, due to error %s"),FST_ERR_SCH_SERIALIZATION_BUILD:n("FST_ERR_SCH_SERIALIZATION_BUILD","Failed building the serialization schema for %s: %s, due to error %s"),FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX:n("FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX",'response schemas should be nested under a valid status code, e.g { 2xx: { type: "object" } }'),FST_ERR_HTTP2_INVALID_VERSION:n("FST_ERR_HTTP2_INVALID_VERSION","HTTP2 is available only from node >= 8.8.1"),FST_ERR_INIT_OPTS_INVALID:n("FST_ERR_INIT_OPTS_INVALID","Invalid initialization options: '%s'"),FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE:n("FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE","Cannot set forceCloseConnections to 'idle' as your HTTP server does not support closeIdleConnections method"),FST_ERR_DUPLICATED_ROUTE:n("FST_ERR_DUPLICATED_ROUTE","Method '%s' already declared for route '%s'"),FST_ERR_BAD_URL:n("FST_ERR_BAD_URL","'%s' is not a valid url component",400,URIError),FST_ERR_ASYNC_CONSTRAINT:n("FST_ERR_ASYNC_CONSTRAINT","Unexpected error from async constraint",500),FST_ERR_DEFAULT_ROUTE_INVALID_TYPE:n("FST_ERR_DEFAULT_ROUTE_INVALID_TYPE","The defaultRoute type should be a function",500,TypeError),FST_ERR_INVALID_URL:n("FST_ERR_INVALID_URL","URL must be a string. Received '%s'",400,TypeError),FST_ERR_ROUTE_OPTIONS_NOT_OBJ:n("FST_ERR_ROUTE_OPTIONS_NOT_OBJ",'Options for "%s:%s" route must be an object',500,TypeError),FST_ERR_ROUTE_DUPLICATED_HANDLER:n("FST_ERR_ROUTE_DUPLICATED_HANDLER",'Duplicate handler for "%s:%s" route is not allowed!',500),FST_ERR_ROUTE_HANDLER_NOT_FN:n("FST_ERR_ROUTE_HANDLER_NOT_FN","Error Handler for %s:%s route, if defined, must be a function",500,TypeError),FST_ERR_ROUTE_MISSING_HANDLER:n("FST_ERR_ROUTE_MISSING_HANDLER",'Missing handler function for "%s:%s" route.',500),FST_ERR_ROUTE_METHOD_INVALID:n("FST_ERR_ROUTE_METHOD_INVALID","Provided method is invalid!",500,TypeError),FST_ERR_ROUTE_METHOD_NOT_SUPPORTED:n("FST_ERR_ROUTE_METHOD_NOT_SUPPORTED","%s method is not supported.",500),FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED:n("FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED","Body validation schema for %s:%s route is not supported!",500),FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT:n("FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT","'bodyLimit' option must be an integer > 0. Got '%s'",500,TypeError),FST_ERR_ROUTE_REWRITE_NOT_STR:n("FST_ERR_ROUTE_REWRITE_NOT_STR",'Rewrite url for "%s" needs to be of type "string" but received "%s"',500,TypeError),FST_ERR_REOPENED_CLOSE_SERVER:n("FST_ERR_REOPENED_CLOSE_SERVER","Fastify has already been closed and cannot be reopened"),FST_ERR_REOPENED_SERVER:n("FST_ERR_REOPENED_SERVER","Fastify is already listening"),FST_ERR_INSTANCE_ALREADY_LISTENING:n("FST_ERR_INSTANCE_ALREADY_LISTENING","Fastify instance is already listening. %s"),FST_ERR_PLUGIN_VERSION_MISMATCH:n("FST_ERR_PLUGIN_VERSION_MISMATCH","fastify-plugin: %s - expected '%s' fastify version, '%s' is installed"),FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE:n("FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE","The decorator '%s'%s is not present in %s"),FST_ERR_PLUGIN_CALLBACK_NOT_FN:n("FST_ERR_PLUGIN_CALLBACK_NOT_FN","fastify-plugin: %s",500,TypeError),FST_ERR_PLUGIN_NOT_VALID:n("FST_ERR_PLUGIN_NOT_VALID","fastify-plugin: %s"),FST_ERR_ROOT_PLG_BOOTED:n("FST_ERR_ROOT_PLG_BOOTED","fastify-plugin: %s"),FST_ERR_PARENT_PLUGIN_BOOTED:n("FST_ERR_PARENT_PLUGIN_BOOTED","fastify-plugin: %s"),FST_ERR_PLUGIN_TIMEOUT:n("FST_ERR_PLUGIN_TIMEOUT","fastify-plugin: %s")};t.exports=o,t.exports.appendStackTrace=function(e,t){return t.cause=e,t},t.exports.AVVIO_ERRORS_MAP={AVV_ERR_CALLBACK_NOT_FN:o.FST_ERR_PLUGIN_CALLBACK_NOT_FN,AVV_ERR_PLUGIN_NOT_VALID:o.FST_ERR_PLUGIN_NOT_VALID,AVV_ERR_ROOT_PLG_BOOTED:o.FST_ERR_ROOT_PLG_BOOTED,AVV_ERR_PARENT_PLG_LOADED:o.FST_ERR_PARENT_PLUGIN_BOOTED,AVV_ERR_READY_TIMEOUT:o.FST_ERR_PLUGIN_TIMEOUT,AVV_ERR_PLUGIN_EXEC_TIMEOUT:o.FST_ERR_PLUGIN_TIMEOUT}},90874,(e,t,r)=>{"use strict";let{format:n}=e.r(12057);function o({name:e,code:t,message:r,unlimited:s=!1}={}){if(!e)throw Error("Warning name must not be empty");if(!t)throw Error("Warning code must not be empty");if(!r)throw Error("Warning message must not be empty");if("boolean"!=typeof s)throw Error("Warning opts.unlimited must be a boolean");t=t.toUpperCase();let i={[e]:function(e,t,r){(!0!==a.emitted||!0===a.unlimited)&&(a.emitted=!0,process.emitWarning(a.format(e,t,r),a.name,a.code))}};s&&(i={[e]:function(e,t,r){a.emitted=!0,process.emitWarning(a.format(e,t,r),a.name,a.code)}});let a=i[e];return a.emitted=!1,a.message=r,a.unlimited=s,a.code=t,a.format=function(e,t,o){return e&&t&&o?n(r,e,t,o):e&&t?n(r,e,t):e?n(r,e):r},a}let s={createWarning:o,createDeprecation:function(e){return o({...e,name:"DeprecationWarning"})}};t.exports=s,t.exports.default=s,t.exports.processWarning=s},28935,(e,t,r)=>{"use strict";let{createDeprecation:n,createWarning:o}=e.r(90874),s=n({code:"FSTDEP005",message:'You are accessing the deprecated "request.connection" property. Use "request.socket" instead.'}),i=n({code:"FSTDEP006",message:"You are decorating Request/Reply with a reference type. This reference is shared amongst all requests. Use onRequest hook instead. Property: %s"}),a=n({code:"FSTDEP007",message:'You are trying to set a HEAD route using "exposeHeadRoute" route flag when a sibling route is already set. See documentation for more info.'}),l=n({code:"FSTDEP008",message:'You are using route constraints via the route { version: "..." } option, use { constraints: { version: "..." } } option instead.'}),u=n({code:"FSTDEP009",message:'You are using a custom route versioning strategy via the server { versioning: "..." } option, use { constraints: { version: "..." } } option instead.'}),c=n({code:"FSTDEP010",message:'Modifying the "reply.sent" property is deprecated. Use the "reply.hijack()" method instead.'}),h=n({code:"FSTDEP011",message:'Variadic listen method is deprecated. Please use ".listen(optionsObject)" instead. The variadic signature will be removed in `fastify@5`.'}),d=n({code:"FSTDEP012",message:'request.context property access is deprecated. Please use "request.routeOptions.config" or "request.routeOptions.schema" instead for accessing Route settings. The "request.context" will be removed in `fastify@5`.'}),f=n({code:"FSTDEP013",message:'Direct return of "trailers" function is deprecated. Please use "callback" or "async-await" for return value. The support of direct return will removed in `fastify@5`.'}),p=n({code:"FSTDEP014",message:"You are trying to set/access the default route. This property is deprecated. Please, use setNotFoundHandler if you want to custom a 404 handler or the wildcard (*) to match all routes."}),y=n({code:"FSTDEP015",message:'You are accessing the deprecated "request.routeSchema" property. Use "request.routeOptions.schema" instead. Property "req.routeSchema" will be removed in `fastify@5`.'}),_=n({code:"FSTDEP016",message:'You are accessing the deprecated "request.routeConfig" property. Use "request.routeOptions.config" instead. Property "req.routeConfig" will be removed in `fastify@5`.'}),R=n({code:"FSTDEP017",message:'You are accessing the deprecated "request.routerPath" property. Use "request.routeOptions.url" instead. Property "req.routerPath" will be removed in `fastify@5`.'}),g=n({code:"FSTDEP018",message:'You are accessing the deprecated "request.routerMethod" property. Use "request.routeOptions.method" instead. Property "req.routerMethod" will be removed in `fastify@5`.'}),E=n({code:"FSTDEP019",message:'reply.context property access is deprecated. Please use "request.routeOptions.config" or "request.routeOptions.schema" instead for accessing Route settings. The "reply.context" will be removed in `fastify@5`.'}),S=n({code:"FSTDEP020",message:'You are using the deprecated "reply.getResponseTime()" method. Use the "reply.elapsedTime" property instead. Method "reply.getResponseTime()" will be removed in `fastify@5`.'}),T=n({code:"FSTDEP021",message:"The `reply.redirect()` method has a new signature: `reply.redirect(url: string, code?: number)`. It will be enforced in `fastify@v5`"}),m=n({code:"FSTDEP021",message:"You are using the deprecated json shorthand schema on route %s. Specify full object schema instead. It will be removed in `fastify@v5`"});t.exports={FSTDEP005:s,FSTDEP006:i,FSTDEP007:a,FSTDEP008:l,FSTDEP009:u,FSTDEP010:c,FSTDEP011:h,FSTDEP012:d,FSTDEP013:f,FSTDEP014:p,FSTDEP015:y,FSTDEP016:_,FSTDEP017:R,FSTDEP018:g,FSTDEP019:E,FSTDEP020:S,FSTDEP021:T,FSTDEP022:m,FSTWRN001:o({name:"FastifyWarning",code:"FSTWRN001",message:"The %s schema for %s: %s is missing. This may indicate the schema is not well specified.",unlimited:!0}),FSTWRN002:o({name:"FastifyWarning",code:"FSTWRN002",message:"The %s plugin being registered mixes async and callback styles, which will result in an error in `fastify@5`",unlimited:!0})}},44785,(e,t,r)=>{"use strict";let{kSchemaHeaders:n,kSchemaParams:o,kSchemaQuerystring:s,kSchemaBody:i,kSchemaResponse:a}=e.r(40940),l=/^[1-5]{1}[0-9]{2}$|^[1-5]xx$|^default$/,{FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX:u}=e.r(35635),{FSTWRN001:c}=e.r(28935);function h(e,t,r){let n=void 0===t[r],o=e&&e(n?null:t[r]);if(o?.then)return o.then(e=>s(e)).catch(e=>e);return s(o);function s(n){return!1===n?e.errors:n&&n.error?n.error:(n&&n.value&&(t[r]=n.value),!1)}}function d(e,t,r){if(e instanceof Error)return e.statusCode=e.statusCode||400,e.code=e.code||"FST_ERR_VALIDATION",e.validationContext=e.validationContext||t,e;let n=r(e,t);return n.statusCode=n.statusCode||400,n.code=n.code||"FST_ERR_VALIDATION",n.validation=e,n.validationContext=t,n}t.exports={symbols:{bodySchema:i,querystringSchema:s,responseSchema:a,paramsSchema:o,headersSchema:n},compileSchemasForValidation:function(e,t,r){let{schema:a}=e;if(!a)return;let{method:l,url:u}=e.config||{},h=a.headers;if(h&&(r||Object.getPrototypeOf(h)!==Object.prototype))e[n]=t({schema:h,method:l,url:u,httpPart:"headers"});else if(h){let r={};Object.keys(h).forEach(e=>{r[e]=h[e]}),r.required instanceof Array&&(r.required=r.required.map(e=>e.toLowerCase())),h.properties&&(r.properties={},Object.keys(h.properties).forEach(e=>{r.properties[e.toLowerCase()]=h.properties[e]})),e[n]=t({schema:r,method:l,url:u,httpPart:"headers"})}else Object.prototype.hasOwnProperty.call(a,"headers")&&c("headers",l,u);if(a.body){let r=a.body.content;if(r){let n={};for(let e of Object.keys(r)){let o=r[e].schema;n[e]=t({schema:o,method:l,url:u,httpPart:"body",contentType:e})}e[i]=n}else e[i]=t({schema:a.body,method:l,url:u,httpPart:"body"})}else Object.prototype.hasOwnProperty.call(a,"body")&&c("body",l,u);a.querystring?e[s]=t({schema:a.querystring,method:l,url:u,httpPart:"querystring"}):Object.prototype.hasOwnProperty.call(a,"querystring")&&c("querystring",l,u),a.params?e[o]=t({schema:a.params,method:l,url:u,httpPart:"params"}):Object.prototype.hasOwnProperty.call(a,"params")&&c("params",l,u)},compileSchemasForSerialization:function(e,t){if(!e.schema||!e.schema.response)return;let{method:r,url:n}=e.config||{};e[a]=Object.keys(e.schema.response).reduce(function(o,s){let i=e.schema.response[s];if(s=s.toLowerCase(),!l.exec(s))throw new u;if(i.content){let e={};for(let o of Object.keys(i.content)){let a=i.content[o].schema;e[o]=t({schema:a,url:n,method:r,httpStatus:s,contentType:o})}o[s]=e}else o[s]=t({schema:i,url:n,method:r,httpStatus:s});return o},{})},validate:function e(t,r,a){var l,u,c,f,p,y,_,R,g,E,S,T,m;let O=void 0===a;if(O||!a.skipParams){let n=h(t[o],r,"params");if(n)if("function"!=typeof n.then)return d(n,"params",t.schemaErrorFormatter);else{return l=n,u=t,c=r,l.then(t=>t?d(t,"params",u.schemaErrorFormatter):e(u,c,{skipParams:!0}))}}if(O||!a.skipBody){let n=null;if("function"==typeof t[i])n=t[i];else if(t[i]){let e=(f=r.headers["content-type"])?f.split(/[ ;]/,1)[0].trim().toLowerCase():"",o=t[i][e];o&&(n=o)}let o=h(n,r,"body");if(o)if("function"!=typeof o.then)return d(o,"body",t.schemaErrorFormatter);else{return p=o,y=t,_=r,p.then(t=>t?d(t,"body",y.schemaErrorFormatter):e(y,_,{skipParams:!0,skipBody:!0}))}}if(O||!a.skipQuery){let n=h(t[s],r,"query");if(n)if("function"!=typeof n.then)return d(n,"querystring",t.schemaErrorFormatter);else{return R=n,g=t,E=r,R.then(t=>t?d(t,"querystring",g.schemaErrorFormatter):e(g,E,{skipParams:!0,skipBody:!0,skipQuery:!0}))}}let C=h(t[n],r,"headers");if(C)if("function"!=typeof C.then)return d(C,"headers",t.schemaErrorFormatter);else{return S=C,T=t,m=0,S.then(e=>!!e&&d(e,"headers",T.schemaErrorFormatter))}return!1}}},69181,(e,t,r)=>{"use strict";let n=["onTimeout","onRequest","preParsing","preValidation","preSerialization","preHandler","onSend","onResponse","onError","onRequestAbort"],o=n.concat(["onRoute","onRegister","onReady","onListen","preClose","onClose"]),{FST_ERR_HOOK_INVALID_TYPE:s,FST_ERR_HOOK_INVALID_HANDLER:i,FST_ERR_SEND_UNDEFINED_ERR:a,FST_ERR_HOOK_TIMEOUT:l,FST_ERR_HOOK_NOT_SUPPORTED:u,AVVIO_ERRORS_MAP:c,appendStackTrace:h}=e.r(35635),{kChildren:d,kHooks:f,kRequestPayloadStream:p}=e.r(40940);function y(){this.onRequest=[],this.preParsing=[],this.preValidation=[],this.preSerialization=[],this.preHandler=[],this.onResponse=[],this.onSend=[],this.onError=[],this.onRoute=[],this.onRegister=[],this.onReady=[],this.onListen=[],this.onTimeout=[],this.onRequestAbort=[],this.preClose=[]}function _(e){return function(t,r,n,o){let s=0;function i(a){let c;if(a||s===t.length)return void o(a,r,n);try{c=e(t[s++],r,n,i)}catch(e){o(e,r,n);return}c&&"function"==typeof c.then&&c.then(l,u)}function l(){i()}function u(e){e||(e=new a),o(e,r,n)}i()}}y.prototype=Object.create(null),y.prototype.validate=function(e,t){if("string"!=typeof e)throw new s;if(!1===Array.isArray(this[e]))throw new u(e);if("function"!=typeof t)throw new i(e,Object.prototype.toString.call(t))},y.prototype.add=function(e,t){this.validate(e,t),this[e].push(t)};let R=_(function(e,t,r,n){return e(t,r,n)}),g=_(O),E=_(O),S=_(O),T=_(O);function m(e,t,r,n,o){let s=0;function i(a,c){let h;if(a)return void o(a,t,r,n);if(void 0!==c&&(n=c),s===e.length)return void o(null,t,r,n);try{h=e[s++](t,r,n,i)}catch(e){o(e,t,r);return}h&&"function"==typeof h.then&&h.then(l,u)}function l(e){i(null,e)}function u(e){e||(e=new a),o(e,t,r,n)}i()}function O(e,t,r,n){if(!0!==r.sent)return e(t,r,n)}t.exports={Hooks:y,buildHooks:function(e){let t=new y;return t.onRequest=e.onRequest.slice(),t.preParsing=e.preParsing.slice(),t.preValidation=e.preValidation.slice(),t.preSerialization=e.preSerialization.slice(),t.preHandler=e.preHandler.slice(),t.onSend=e.onSend.slice(),t.onResponse=e.onResponse.slice(),t.onError=e.onError.slice(),t.onRoute=e.onRoute.slice(),t.onRegister=e.onRegister.slice(),t.onTimeout=e.onTimeout.slice(),t.onRequestAbort=e.onRequestAbort.slice(),t.onReady=[],t.onListen=[],t.preClose=[],t},hookRunnerGenerator:_,preParsingHookRunner:function(e,t,r,n){let o=0;function s(a,u){let c;if(!r.sent){if(void 0!==u&&(t[p]=u),a||o===e.length)return void n(a,t,r);try{c=e[o++](t,r,t[p],s)}catch(e){n(e,t,r);return}c&&"function"==typeof c.then&&c.then(i,l)}}function i(e){s(null,e)}function l(e){e||(e=new a),n(e,t,r)}s()},onResponseHookRunner:R,onSendHookRunner:m,preSerializationHookRunner:m,onRequestAbortHookRunner:function(e,t,r){let n=0;function o(a){let l;if(a||n===e.length)return void r(a,t);try{l=e[n++](t,o)}catch(e){r(e,t);return}l&&"function"==typeof l.then&&l.then(s,i)}function s(){o()}function i(e){e||(e=new a),r(e,t)}o()},hookIterator:O,hookRunnerApplication:function e(t,r,n,o){let s=n[f][t],i=0,a=0;function u(e){e?o(e="AVV_ERR_READY_TIMEOUT"===e.code?h(e,new l(t)):null!=c[e.code]?h(e,new c[e.code](e.message)):e):o()}!function o(l){var c,h;if(l)return void u(l);if(i===s.length&&a===n[d].length)return void(0===i&&0===a?u():r(function(e,t){u(e),t(e)}));if(i===s.length&&a<n[d].length)return void e(t,r,n[d][a++],o);r((c=s[i++],h=n,function(e,t){if(e)return void t(e);if(1===c.length){try{c.call(h,t)}catch(e){t(e)}return}try{let e=c.call(h);if(e&&"function"==typeof e.then)return void e.then(t,t)}catch(t){e=t}t(e)})),o()}()},onListenHookRunner:function e(t){let r=t[f].onListen,n=r.length,o=0,s=0;async function i(e,t,r){if(1===e.length){try{e.call(t,r)}catch(e){r(e)}return}try{let n=e.call(t);if(n&&"function"==typeof n.then)return void n.then(r,r);r()}catch(e){r(e)}}!function a(l){if(l&&t.log.error(l),o===n){for(;s<t[d].length;)e(t[d][s++]);return}i(r[o++],t,a)}()},preHandlerHookRunner:E,preValidationHookRunner:g,onRequestHookRunner:T,onTimeoutHookRunner:S,lifecycleHooks:n,supportedHooks:o}},10127,(e,t,r)=>{"use strict";let{kReplyIsError:n,kReplyHijacked:o}=e.r(40940);t.exports=function(e,t){e.then(function(e){if(!0!==t[o]&&(void 0!==e||!1===t.sent&&!1===t.raw.headersSent&&!1===t.request.raw.aborted))try{t.send(e)}catch(e){t[n]=!0,t.send(e)}},function(e){if(!0===t.sent)return void t.log.error({err:e},"Promise errored, but reply.sent = true was set");t[n]=!0;try{t.send(e)}catch(e){t.send(e)}})}},24359,(e,t,r)=>{"use strict";let{validate:n}=e.r(44785),{preValidationHookRunner:o,preHandlerHookRunner:s}=e.r(69181),i=e.r(10127),{kReplyIsError:a,kRouteContext:l}=e.r(40940);function u(e,t){try{null!==e[l].preValidation?o(e[l].preValidation,e,t,c):c(null,e,t)}catch(r){c(r,e,t)}}function c(e,t,r){if(!0===r.sent)return;if(null!=e){r[a]=!0,r.send(e);return}let o=n(r[l],t);if(o&&"function"==typeof o.then){let e=h.bind(null,t,r);o.then(e,e)}else h(t,r,o)}function h(e,t,r){if(r){if(!1===t[l].attachValidation)return void t.send(r);t.request.validationError=r}null!==e[l].preHandler?s(e[l].preHandler,e,t,d):d(null,e,t)}function d(e,t,r){let n;if(!r.sent){if(null!=e){r[a]=!0,r.send(e);return}try{n=t[l].handler(t,r)}catch(e){r[a]=!0,r.send(e);return}void 0!==n&&(null!==n&&"function"==typeof n.then?i(n,r):r.send(n))}}t.exports=function(e,t,r){if(!0===r.sent)return;if(null!=e){r[a]=!0,r.send(e);return}let n=t.raw.method,o=t.headers,s=t[l];if("GET"===n||"HEAD"===n)return void u(t,r);let i=o["content-type"];"POST"===n||"PUT"===n||"PATCH"===n||"TRACE"===n||"SEARCH"===n||"PROPFIND"===n||"PROPPATCH"===n||"LOCK"===n||"COPY"===n||"MOVE"===n||"MKCOL"===n||"REPORT"===n||"MKCALENDAR"===n?void 0===i?void 0===o["transfer-encoding"]&&("0"===o["content-length"]||void 0===o["content-length"])?u(t,r):s.contentTypeParser.run("",u,t,r):s.contentTypeParser.run(i,u,t,r):"OPTIONS"===n||"DELETE"===n?void 0!==i&&(void 0!==o["transfer-encoding"]||void 0!==o["content-length"])?s.contentTypeParser.run(i,u,t,r):u(t,r):u(t,r)},t.exports[Symbol.for("internals")]={handler:u,preHandlerCallback:d}},70306,(e,t,r)=>{"use strict";t.exports={supportedMethods:["DELETE","GET","HEAD","PATCH","POST","PUT","OPTIONS","PROPFIND","PROPPATCH","MKCOL","COPY","MOVE","LOCK","UNLOCK","TRACE","SEARCH","REPORT","MKCALENDAR"]}},61740,(e,t,r)=>{"use strict";function n(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}t.exports=function(e){if((e=e||{}).circles)return function(e){let t=[],r=[],o=new Map;if(o.set(Date,e=>new Date(e)),o.set(Map,(e,t)=>new Map(i(Array.from(e),t))),o.set(Set,(e,t)=>new Set(i(Array.from(e),t))),e.constructorHandlers)for(let t of e.constructorHandlers)o.set(t[0],t[1]);let s=null;return e.proto?function e(a){if("object"!=typeof a||null===a)return a;if(Array.isArray(a))return i(a,e);if(a.constructor!==Object&&(s=o.get(a.constructor)))return s(a,e);let l={};for(let i in t.push(a),r.push(l),a){let u=a[i];if("object"!=typeof u||null===u)l[i]=u;else if(u.constructor!==Object&&(s=o.get(u.constructor)))l[i]=s(u,e);else if(ArrayBuffer.isView(u))l[i]=n(u);else{let n=t.indexOf(u);-1!==n?l[i]=r[n]:l[i]=e(u)}}return t.pop(),r.pop(),l}:function e(a){if("object"!=typeof a||null===a)return a;if(Array.isArray(a))return i(a,e);if(a.constructor!==Object&&(s=o.get(a.constructor)))return s(a,e);let l={};for(let i in t.push(a),r.push(l),a){if(!1===Object.hasOwnProperty.call(a,i))continue;let u=a[i];if("object"!=typeof u||null===u)l[i]=u;else if(u.constructor!==Object&&(s=o.get(u.constructor)))l[i]=s(u,e);else if(ArrayBuffer.isView(u))l[i]=n(u);else{let n=t.indexOf(u);-1!==n?l[i]=r[n]:l[i]=e(u)}}return t.pop(),r.pop(),l};function i(e,i){let a=Object.keys(e),l=Array(a.length);for(let u=0;u<a.length;u++){let c=a[u],h=e[c];if("object"!=typeof h||null===h)l[c]=h;else if(h.constructor!==Object&&(s=o.get(h.constructor)))l[c]=s(h,i);else if(ArrayBuffer.isView(h))l[c]=n(h);else{let e=t.indexOf(h);-1!==e?l[c]=r[e]:l[c]=i(h)}}return l}}(e);let t=new Map;if(t.set(Date,e=>new Date(e)),t.set(Map,(e,t)=>new Map(o(Array.from(e),t))),t.set(Set,(e,t)=>new Set(o(Array.from(e),t))),e.constructorHandlers)for(let r of e.constructorHandlers)t.set(r[0],r[1]);let r=null;return e.proto?function e(s){if("object"!=typeof s||null===s)return s;if(Array.isArray(s))return o(s,e);if(s.constructor!==Object&&(r=t.get(s.constructor)))return r(s,e);let i={};for(let o in s){let a=s[o];"object"!=typeof a||null===a?i[o]=a:a.constructor!==Object&&(r=t.get(a.constructor))?i[o]=r(a,e):ArrayBuffer.isView(a)?i[o]=n(a):i[o]=e(a)}return i}:function e(s){if("object"!=typeof s||null===s)return s;if(Array.isArray(s))return o(s,e);if(s.constructor!==Object&&(r=t.get(s.constructor)))return r(s,e);let i={};for(let o in s){if(!1===Object.hasOwnProperty.call(s,o))continue;let a=s[o];"object"!=typeof a||null===a?i[o]=a:a.constructor!==Object&&(r=t.get(a.constructor))?i[o]=r(a,e):ArrayBuffer.isView(a)?i[o]=n(a):i[o]=e(a)}return i};function o(e,o){let s=Object.keys(e),i=Array(s.length);for(let a=0;a<s.length;a++){let l=s[a],u=e[l];"object"!=typeof u||null===u?i[l]=u:u.constructor!==Object&&(r=t.get(u.constructor))?i[l]=r(u,o):ArrayBuffer.isView(u)?i[l]=n(u):i[l]=o(u)}return i}}},1827,(e,t,r)=>{"use strict";let n=e.r(61740)({circles:!1,proto:!0}),{kSchemaVisited:o,kSchemaResponse:s}=e.r(40940),i=Symbol.for("fluent-schema-object"),{FSTDEP022:a}=e.r(28935),{FST_ERR_SCH_MISSING_ID:l,FST_ERR_SCH_ALREADY_PRESENT:u,FST_ERR_SCH_DUPLICATE:c,FST_ERR_SCH_CONTENT_MISSING_SCHEMA:h}=e.r(35635),d=["params","body","querystring","query","headers"];function f(e){this.store=e||{}}function p(e){return"object"==typeof e&&Object.getPrototypeOf(e)!==Object.prototype}function y(e,t,r){return!r||t.$ref||t.oneOf||t.allOf||t.anyOf||t.$merge||t.$patch||t.type||t.properties?t:(a(e),{type:"object",properties:t})}f.prototype.add=function(e){let t=n(e.isFluentSchema||e.isFluentJSONSchema||e[i]?e.valueOf():e),r=t.$id;if(!r)throw new l;if(this.store[r])throw new u(r);this.store[r]=t},f.prototype.getSchemas=function(){return Object.assign({},this.store)},f.prototype.getSchema=function(e){return this.store[e]},t.exports={buildSchemas:e=>new f(e),getSchemaSerializer:function(e,t,r){let n=e[s];if(!n)return!1;if(n[t]){if(n[t].constructor===Object&&r){let e=r.split(";",1)[0];return!!n[t][e]&&n[t][e]}return n[t]}let o=(t+"")[0]+"xx";if(n[o]){if(n[o].constructor===Object&&r){let e=r.split(";",1)[0];return!!n[o][e]&&n[o][e]}return n[o]}if(n.default){if(n.default.constructor===Object&&r){let e=r.split(";",1)[0];return!!n.default[e]&&n.default[e]}return n.default}return!1},normalizeSchema:function(e,t,r){if(t[o])return t;if(t.query){if(t.querystring)throw new c("querystring");t.querystring=t.query}for(let n of(function(e){for(let t of d)e[t]&&(e[t].isFluentSchema||e[t][i])&&(e[t]=e[t].valueOf());if(e.response)for(let t of Object.keys(e.response))(e.response[t].isFluentSchema||e.response[t][i])&&(e.response[t]=e.response[t].valueOf())}(t),d)){let o=t[n];if(o&&!p(o)){if("body"===n&&o.content){let n=o.content,s=Object.keys(n);for(let o=0;o<s.length;o++){let i=s[o],a=n[i].schema;if(!a)throw new h(i);t.body.content[i].schema=y(e.url,a,r.jsonShorthand)}continue}t[n]=y(e.url,o,r.jsonShorthand)}}if(t.response)for(let n of Object.keys(t.response)){if(p(t.response[n]))continue;let o=t.response[n].content,s=!1;if(o){let i=Object.keys(o);for(let a=0;a<i.length;a++){let l=i[a];if(!o[l].schema){if(1===i.length)break;throw new h(l)}t.response[n].content[l].schema=y(e.url,o[l].schema,r.jsonShorthand),a===i.length-1&&(s=!0)}}s||(t.response[n]=y(e.url,t.response[n],r.jsonShorthand))}return t[o]=!0,t}}},38962,(e,t,r)=>{"use strict";function n(e,t,r,n){if(void 0===r)return t.header("content-length","0"),n(null,null);if("function"==typeof r.resume)return r.on("error",e=>{t.log.error({err:e},"Error on Stream found for HEAD route")}),r.resume(),n(null,null);let o=""+Buffer.byteLength(r);t.header("content-length",o),n(null,null)}t.exports={parseHeadOnSendHandlers:function(e){return null==e?n:Array.isArray(e)?[...e,n]:[e,n]}}},47299,(e,t,r)=>{t.exports=e.x("node:http",()=>require("node:http"))},58772,(e,t,r)=>{"use strict";let n=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;t.exports=class e{constructor(e){switch(e&&e.rounding){case"floor":this.parseInteger=Math.floor;break;case"ceil":this.parseInteger=Math.ceil;break;case"round":this.parseInteger=Math.round;break;default:this.parseInteger=Math.trunc}this._options=e}asInteger(e){if(Number.isInteger(e))return""+e;if("bigint"==typeof e)return e.toString();let t=this.parseInteger(e);if(t===1/0||t===-1/0||t!=t)throw Error(`The value "${e}" cannot be converted to an integer.`);return""+t}asNumber(e){let t=Number(e);if(t!=t)throw Error(`The value "${e}" cannot be converted to a number.`);return t===1/0||t===-1/0?"null":""+t}asBoolean(e){return e&&"true"||"false"}asDateTime(e){if(null===e)return'""';if(e instanceof Date)return'"'+e.toISOString()+'"';if("string"==typeof e)return'"'+e+'"';throw Error(`The value "${e}" cannot be converted to a date-time.`)}asDate(e){if(null===e)return'""';if(e instanceof Date)return'"'+new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().slice(0,10)+'"';if("string"==typeof e)return'"'+e+'"';throw Error(`The value "${e}" cannot be converted to a date.`)}asTime(e){if(null===e)return'""';if(e instanceof Date)return'"'+new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().slice(11,19)+'"';if("string"==typeof e)return'"'+e+'"';throw Error(`The value "${e}" cannot be converted to a time.`)}asString(e){let t=e.length;if(t<42){let n="",o=-1,s=255;for(var r=0;r<t;r++)if(34===(s=e.charCodeAt(r))||92===s)-1===o&&(o=0),n+=e.slice(o,r)+"\\",o=r;else if(s<32||s>=55296&&s<=57343)return JSON.stringify(e);return -1===o&&'"'+e+'"'||'"'+n+e.slice(o)+'"'}return t<5e3&&!1===n.test(e)?'"'+e+'"':JSON.stringify(e)}asUnsafeString(e){return'"'+e+'"'}getState(){return this._options}static restoreFromState(t){return new e(t)}}},12900,(e,t,r)=>{"use strict";let n=e.r(58772).restoreFromState({mode:"standalone"});t.exports=function(e){let t,r=e&&"function"==typeof e.toJSON?e.toJSON():e;if(null===r)return"{}";let o="{",s=!1;return void 0!==(t=r.statusCode)&&(!s&&(s=!0)||(o+=","),o+='"statusCode":',o+=n.asNumber(t)),void 0!==(t=r.code)&&(!s&&(s=!0)||(o+=","),o+='"code":',"string"!=typeof t?null===t?o+='""':t instanceof Date?o+='"'+t.toISOString()+'"':t instanceof RegExp?o+=n.asString(t.source):o+=n.asString(t.toString()):o+=n.asString(t)),void 0!==(t=r.error)&&(!s&&(s=!0)||(o+=","),o+='"error":',"string"!=typeof t?null===t?o+='""':t instanceof Date?o+='"'+t.toISOString()+'"':t instanceof RegExp?o+=n.asString(t.source):o+=n.asString(t.toString()):o+=n.asString(t)),void 0!==(t=r.message)&&(!s&&(s=!0)||(o+=","),o+='"message":',"string"!=typeof t?null===t?o+='""':t instanceof Date?o+='"'+t.toISOString()+'"':t instanceof RegExp?o+=n.asString(t.source):o+=n.asString(t.toString()):o+=n.asString(t)),o+"}"}},41214,(e,t,r)=>{"use strict";let n=e.r(47299).STATUS_CODES,o=e.r(10127),{kReplyHeaders:s,kReplyNextErrorHandler:i,kReplyIsRunningOnErrorHook:a,kReplyHasStatusCode:l,kRouteContext:u,kDisableRequestLogging:c}=e.r(40940),{FST_ERR_REP_INVALID_PAYLOAD_TYPE:h,FST_ERR_FAILED_ERROR_SERIALIZATION:d}=e.r(35635),{getSchemaSerializer:f}=e.r(1827),p=e.r(12900),y={func:function(e,t,r){var n,o;let s,i;if(n=e,i=(i=(s=(o=r).raw).statusCode)>=400?i:500,null!=n&&(void 0!==n.headers&&o.headers(n.headers),n.status>=400?i=n.status:n.statusCode>=400&&(i=n.statusCode)),s.statusCode=i,!r[l]||200===r.statusCode){let t=e.statusCode||e.status;r.code(t>=400?t:500)}r.statusCode<500?r.log[c]||r.log.info({res:r,err:e},e&&e.message):r.log[c]||r.log.error({req:t,res:r,err:e},e&&e.message),r.send(e)},toJSON(){return this.func.name.toString()+"()"}};function _(e,t,r){let o,i=t.raw,a=t.statusCode;t[s]["content-type"]=t[s]["content-type"]??"application/json; charset=utf-8";try{let r=f(t[u],a,t[s]["content-type"]);o=!1===r?p({error:n[a+""],code:e.code,message:e.message,statusCode:a}):r(Object.create(e,{error:{value:n[a+""]},message:{value:e.message},statusCode:{value:a}}))}catch(r){t.log[c]||t.log.error({err:r,statusCode:i.statusCode},"The serializer for the given status code failed"),t.code(500),o=p(new d(r.message,e.message))}"string"==typeof o||Buffer.isBuffer(o)||(o=p(new h(typeof o))),t[s]["content-length"]=""+Buffer.byteLength(o),r(t,o)}t.exports={buildErrorHandler:function(e=y,t){if(!t)return e;let r=Object.create(e);return r.func=t,r},handleError:function(e,t,r){e[a]=!1;let n=e[u];if(!1===e[i])return void _(t,e,function(e,t){try{e.raw.writeHead(e.raw.statusCode,e[s])}catch(t){e.log[c]||e.log.warn({req:e.request,res:e,err:t},t&&t.message),e.raw.writeHead(e.raw.statusCode)}e.raw.end(t)});let l=e[i]||n.errorHandler;e[i]=Object.getPrototypeOf(l),delete e[s]["content-type"],delete e[s]["content-length"];let h=l.func;if(!h){e[i]=!1,_(t,e,r);return}try{let r=h(t,e.request,e);void 0!==r&&(null!==r&&"function"==typeof r.then?o(r,e):e.send(r))}catch(t){e.send(t)}}}},67750,(e,t,r)=>{"use strict";function n(){}let o={fatal:n,error:n,warn:n,info:n,debug:n,trace:n};Object.defineProperty(t,"exports",{get:()=>Object.create(o)})},77553,(e,t,r)=>{t.exports=e.x("pino-2436580b6da2cba7",()=>require("pino-2436580b6da2cba7"))},6344,(e,t,r)=>{"use strict";let n=e.r(67750),o=e.r(77553),{serializersSym:s}=o.symbols,{FST_ERR_LOG_INVALID_DESTINATION:i,FST_ERR_LOG_INVALID_LOGGER:a}=e.r(35635);function l(e){if(e.stream&&e.file)throw new i;e.file&&(e.stream=o.destination(e.file),delete e.file);let t=e.logger,r=e.genReqId,n=null;return t?(e.logger=void 0,e.genReqId=void 0,t[s]&&(e.serializers=Object.assign({},e.serializers,t[s])),n=t.child({},e),e.logger=t,e.genReqId=r):n=o(e,e.stream),n}let u={req:function(e){return{method:e.method,url:e.url,version:e.headers&&e.headers["accept-version"],hostname:e.hostname,remoteAddress:e.ip,remotePort:e.socket?e.socket.remotePort:void 0}},err:o.stdSerializers.err,res:function(e){return{statusCode:e.statusCode}}};function c(e,t){let r=["info","error","debug","fatal","warn","trace","child"],n=e?r.filter(t=>!e[t]||"function"!=typeof e[t]):r;if(!n.length)return!0;if(n.length===r.length&&!t)return!1;throw a(n.join(","))}function h(e,t,r){return e.child(t,r)}t.exports={createLogger:function(e){if(!e.logger)return n.child=()=>n,{logger:n,hasLogger:!1};if(c(e.logger))return{logger:l({logger:e.logger,serializers:Object.assign({},u,e.logger.serializers)}),hasLogger:!0};let t={};return"[object Object]"===Object.prototype.toString.call(e.logger)&&Reflect.ownKeys(e.logger).forEach(r=>{Object.defineProperty(t,r,{value:e.logger[r],writable:!0,enumerable:!0,configurable:!0})}),t.level=t.level||"info",t.serializers=Object.assign({},u,t.serializers),e.logger=t,{logger:l(e.logger),hasLogger:!0}},createChildLogger:function(e,t,r,n,o){let s={[e.requestIdLogLabel]:n},i=e.childLoggerFactory.call(e.server,t,s,o||{},r);return e.childLoggerFactory!==h&&c(i,!0),i},defaultChildLoggerFactory:h,serializers:u,now:function(){let e=process.hrtime();return 1e3*e[0]+e[1]/1e6}}},55175,(e,t,r)=>{"use strict";t.exports={getGenReqId:function(e,t){return e.genReqId(t)},reqIdGenFactory:function(e,t){var r,n;let o,s=t||(o=0,function(){return o=o+1&0x7fffffff,`req-${o.toString(36)}`});return e?(r=e,n=s,function(e){return e.headers[r]||n(e)}):s}}},57083,(e,t,r)=>{"use strict";let n=e.r(25689),o=e.r(30688),s=e.r(24359),{onRequestAbortHookRunner:i,lifecycleHooks:a,preParsingHookRunner:l,onTimeoutHookRunner:u,onRequestHookRunner:c}=e.r(69181),{supportedMethods:h}=e.r(70306),{normalizeSchema:d}=e.r(1827),{parseHeadOnSendHandlers:f}=e.r(38962),{FSTDEP007:p,FSTDEP008:y,FSTDEP014:_}=e.r(28935),{compileSchemasForValidation:R,compileSchemasForSerialization:g}=e.r(44785),{FST_ERR_SCH_VALIDATION_BUILD:E,FST_ERR_SCH_SERIALIZATION_BUILD:S,FST_ERR_DEFAULT_ROUTE_INVALID_TYPE:T,FST_ERR_DUPLICATED_ROUTE:m,FST_ERR_INVALID_URL:O,FST_ERR_HOOK_INVALID_HANDLER:C,FST_ERR_ROUTE_OPTIONS_NOT_OBJ:b,FST_ERR_ROUTE_DUPLICATED_HANDLER:A,FST_ERR_ROUTE_HANDLER_NOT_FN:N,FST_ERR_ROUTE_MISSING_HANDLER:v,FST_ERR_ROUTE_METHOD_NOT_SUPPORTED:I,FST_ERR_ROUTE_METHOD_INVALID:P,FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED:F,FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT:w,FST_ERR_HOOK_INVALID_ASYNC_HANDLER:D}=e.r(35635),{kRoutePrefix:L,kLogLevel:x,kLogSerializers:k,kHooks:H,kSchemaController:j,kOptions:U,kReplySerializerDefault:M,kReplyIsError:q,kRequestPayloadStream:V,kDisableRequestLogging:$,kSchemaErrorFormatter:B,kErrorHandler:G,kHasBeenDecorated:Y,kRequestAcceptVersion:z,kRouteByFastify:W,kRouteContext:K}=e.r(40940),{buildErrorHandler:J}=e.r(41214),{createChildLogger:X}=e.r(6344),{getGenReqId:Z}=e.r(55175);function Q(e,t){t&&e.log.error({err:t},"onRequestAborted hook failed")}function ee(){let{context:e,request:t,reply:r}=this._meta;u(e.onTimeout,t,r,ei)}function et(e){if("string"!=typeof e)throw new P;if(e=e.toUpperCase(),-1===h.indexOf(e))throw new I(e);return e}function er(e,t,r){if(("GET"===e||"HEAD"===e)&&r&&r.body)throw new F(e,t)}function en(e){if(void 0!==e&&(!Number.isInteger(e)||e<=0))throw new w(e)}function eo(e,t,r){if(!0!==r.sent){if(null!=e){r[q]=!0,r.send(e);return}t[V]=t.raw,null!==t[K].preParsing?l(t[K].preParsing,t,r,s):s(null,t,r)}}function es(){this.keepAliveConnections.delete(this.socket)}function ei(){}t.exports={buildRouting:function(e){let t,r,s,l,u,h,I,P,F,w,q,V,K,ei=n(e.config),ea=!1;return{setup(e,n){t=n.avvio,r=n.fourOhFour,s=n.logger,l=n.hasLogger,u=n.setupResponseListeners,h=n.throwIfAlreadyStarted,V=n.validateHTTPVersion,q=e.exposeHeadRoutes,I=e.disableRequestLogging,P=e.ignoreTrailingSlash,F=e.ignoreDuplicateSlashes,w=!Object.prototype.hasOwnProperty.call(e,"return503OnClosing")||e.return503OnClosing,K=n.keepAliveConnections},routing:ei.lookup.bind(ei),route:ec,hasRoute:function({options:e}){let t=e.method?.toUpperCase()??"";return null!==eu({...e,method:t})},prepareRoute:el,getDefaultRoute:function(){return _(),ei.defaultRoute},setDefaultRoute:function(e){if(_(),"function"!=typeof e)throw new T;ei.defaultRoute=e},routeHandler:eh,closeRoutes:()=>{ea=!0},printRoutes:ei.prettyPrint.bind(ei),addConstraintStrategy:function(e){return h("Cannot add constraint strategy!"),ei.addConstraintStrategy(e)},hasConstraintStrategy:function(e){return ei.hasConstraintStrategy(e)},isAsyncConstraint:function(){return ei.constrainer.asyncStrategiesInUse.size>0},findRoute:eu};function el({method:e,url:t,options:r,handler:n,isFastify:o}){if("string"!=typeof t)throw new O(typeof t);if(n||"function"!=typeof r){if(n&&"function"==typeof n){if("[object Object]"!==Object.prototype.toString.call(r))throw new b(e,t);else if(r.handler)if("function"==typeof r.handler)throw new A(e,t);else throw new N(e,t)}}else n=r,r={};return ec.call(this,{options:r=Object.assign({},r,{method:e,url:t,path:t,handler:n||r&&r.handler}),isFastify:o})}function eu(e){let t=ei.find(e.method,e.url||"",e.constraints);return t?{handler:t.handler,params:t.params,searchParams:t.searchParams}:null}function ec({options:e,isFastify:n}){let s={...e},{exposeHeadRoute:i}=s,l=null!=i?i:q,u="GET"===s.method||Array.isArray(s.method)&&s.method.includes("GET"),c="HEAD"===s.method||Array.isArray(s.method)&&s.method.includes("HEAD"),_=l&&u?{...e}:null;h("Cannot add route!");let T=s.url||s.path||"";if(Array.isArray(s.method))for(var O=0;O<s.method.length;++O)s.method[O]=et(s.method[O]),er(s.method[O],T,s.schema);else s.method=et(s.method),er(s.method,T,s.schema);if(!s.handler)throw new v(s.method,T);if(void 0!==s.errorHandler&&"function"!=typeof s.errorHandler)throw new N(s.method,T);en(s.bodyLimit);let b=this[L];if("/"===T&&b.length>0&&"HEAD"!==s.method)switch(s.prefixTrailingSlash){case"slash":A.call(this,{path:T,isFastify:n});break;case"no-slash":A.call(this,{path:"",isFastify:n});break;default:A.call(this,{path:"",isFastify:n}),!0===P||!0===F&&b.endsWith("/")||A.call(this,{path:T,prefixing:!0,isFastify:n})}else"/"===T[0]&&b.endsWith("/")?A.call(this,{path:T.slice(1),isFastify:n}):A.call(this,{path:T,isFastify:n});return this;function A({path:e,prefixing:n=!1,isFastify:h=!1}){let T=b+e;if(s.url=T,s.path=T,s.routePath=e,s.prefix=b,s.logLevel=s.logLevel||this[x],(this[k]||s.logSerializers)&&(s.logSerializers=Object.assign(Object.create(this[k]),s.logSerializers)),null==s.attachValidation&&(s.attachValidation=!1),!1===n)for(let e of this[H].onRoute)e.call(this,s);for(let e of a)if(s&&e in s){if(Array.isArray(s[e]))for(let t of s[e]){if("function"!=typeof t)throw new C(e,Object.prototype.toString.call(t));if("onSend"===e||"preSerialization"===e||"onError"===e||"preParsing"===e){if("AsyncFunction"===t.constructor.name&&4===t.length)throw new D}else if("onRequestAbort"===e){if("AsyncFunction"===t.constructor.name&&1!==t.length)throw new D}else if("AsyncFunction"===t.constructor.name&&3===t.length)throw new D}else if(void 0!==s[e]&&"function"!=typeof s[e])throw new C(e,Object.prototype.toString.call(s[e]))}let O=s.constraints||{},A={...s.config,url:T,method:s.method},N=new o({schema:s.schema,handler:s.handler.bind(this),config:A,errorHandler:s.errorHandler,childLoggerFactory:s.childLoggerFactory,bodyLimit:s.bodyLimit,logLevel:s.logLevel,logSerializers:s.logSerializers,attachValidation:s.attachValidation,schemaErrorFormatter:s.schemaErrorFormatter,replySerializer:this[M],validatorCompiler:s.validatorCompiler,serializerCompiler:s.serializerCompiler,exposeHeadRoute:l,prefixTrailingSlash:s.prefixTrailingSlash||"both",server:this,isFastify:h});s.version&&(y(),O.version=s.version);let v=ei.findRoute("HEAD",s.url,O),I=null!==v;c&&I&&!N[W]&&v.store[W]&&ei.off("HEAD",s.url,O);try{ei.on(s.method,s.url,{constraints:O},eh,N)}catch(e){if(!N[W]){if(e.message.includes(`Method '${s.method}' already declared for route`))throw new m(s.method,s.url);throw e}}if(this.after((e,n)=>{N.errorHandler=s.errorHandler?J(this[G],s.errorHandler):this[G],N._parserOptions.limit=s.bodyLimit||null,N.logLevel=s.logLevel,N.logSerializers=s.logSerializers,N.attachValidation=s.attachValidation,N[M]=this[M],N.schemaErrorFormatter=s.schemaErrorFormatter||this[B]||N.schemaErrorFormatter,t.once("preReady",()=>{for(let e of a){let t=this[H][e].concat(s[e]||[]).map(e=>e.bind(this));N[e]=t.length?t:null}for(;!N.Request[Y]&&N.Request.parent;)N.Request=N.Request.parent;for(;!N.Reply[Y]&&N.Reply.parent;)N.Reply=N.Reply.parent;if(r.setContext(this,N),s.schema){N.schema=d(s,N.schema,this.initialConfig);let e=this[j];!s.validatorCompiler&&(s.schema.body||s.schema.headers||s.schema.querystring||s.schema.params)&&e.setupValidator(this[U]);try{let t="function"==typeof s?.validatorCompiler||e.isCustomValidatorCompiler;R(N,s.validatorCompiler||e.validatorCompiler,t)}catch(e){throw new E(s.method,T,e.message)}s.schema.response&&!s.serializerCompiler&&e.setupSerializer(this[U]);try{g(N,s.serializerCompiler||e.serializerCompiler)}catch(e){throw new S(s.method,T,e.message)}}}),n(e)}),l&&u&&!c&&!I){let t=f(_.onSend);el.call(this,{method:"HEAD",url:e,options:{..._,onSend:t},isFastify:!0})}else I&&i&&p()}}function eh(e,t,r,n,o){let a=Z(n.server,e),h={level:n.logLevel};n.logSerializers&&(h.serializers=n.logSerializers);let d=X(n,s,e,a,h);if(d[$]=I,!V(e.httpVersion)){d.info({res:{statusCode:505}},"request aborted - invalid HTTP version");let e='{"error":"HTTP Version Not Supported","message":"HTTP Version Not Supported","statusCode":505}',r={"Content-Type":"application/json","Content-Length":e.length};t.writeHead(505,r),t.end(e);return}if(!0===ea&&(2!==e.httpVersionMajor&&t.setHeader("Connection","close"),w)){t.writeHead(503,{"Content-Type":"application/json","Content-Length":"80"}),t.end('{"error":"Service Unavailable","message":"Service Unavailable","statusCode":503}'),d.info({res:{statusCode:503}},"request aborted - refusing to accept new requests as server is closing");return}"keep-alive"===String.prototype.toLowerCase.call(e.headers.connection||"")&&!1===K.has(e.socket)&&(K.add(e.socket),e.socket.on("close",es.bind({keepAliveConnections:K,socket:e.socket}))),void 0!==e.headers[z]&&(e.headers["accept-version"]=e.headers[z],e.headers[z]=void 0);let f=new n.Request(a,r,e,o,d,n),p=new n.Reply(t,f,d);!1===I&&d.info({req:f},"incoming request"),(!0===l||null!==n.onResponse)&&u(p),null!==n.onRequest?c(n.onRequest,f,p,eo):eo(null,f,p),null!==n.onRequestAbort&&e.on("close",()=>{e.aborted&&i(n.onRequestAbort,f,Q.bind(null,p))}),null!==n.onTimeout&&(f.raw.socket._meta||f.raw.socket.on("timeout",ee),f.raw.socket._meta={context:n,request:f,reply:p})}},validateBodyLimitOption:en}},9667,e=>{"use strict";var t=e.i(47909),r=e.i(74017),n=e.i(96250),o=e.i(59756),s=e.i(61916),i=e.i(74677),a=e.i(69741),l=e.i(16795),u=e.i(87718),c=e.i(95169),h=e.i(47587),d=e.i(66012),f=e.i(70101),p=e.i(26937),y=e.i(10372),_=e.i(93695);e.i(52474);var R=e.i(220),g=e.i(57083);let E=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/node_modules/fastify/lib/route",pathname:"/api/node_modules/fastify/lib",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/node_modules/fastify/lib/route.js",nextConfigOutput:"",userland:g}),{workAsyncStorage:S,workUnitAsyncStorage:T,serverHooks:m}=E;function O(){return(0,n.patchFetch)({workAsyncStorage:S,workUnitAsyncStorage:T})}async function C(e,t,n){E.isDev&&(0,o.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let g="/api/node_modules/fastify/lib/route";g=g.replace(/\/index$/,"")||"/";let S=await E.prepare(e,t,{srcPage:g,multiZoneDraftMode:!1});if(!S)return t.statusCode=400,t.end("Bad Request"),null==n.waitUntil||n.waitUntil.call(n,Promise.resolve()),null;let{buildId:T,params:m,nextConfig:O,parsedUrl:C,isDraftMode:b,prerenderManifest:A,routerServerContext:N,isOnDemandRevalidate:v,revalidateOnlyGenerated:I,resolvedPathname:P,clientReferenceManifest:F,serverActionsManifest:w}=S,D=(0,a.normalizeAppPath)(g),L=!!(A.dynamicRoutes[D]||A.routes[P]),x=async()=>((null==N?void 0:N.render404)?await N.render404(e,t,C,!1):t.end("This page could not be found"),null);if(L&&!b){let e=!!A.routes[P],t=A.dynamicRoutes[D];if(t&&!1===t.fallback&&!e){if(O.experimental.adapterPath)return await x();throw new _.NoFallbackError}}let k=null;!L||E.isDev||b||(k="/index"===(k=P)?"/":k);let H=!0===E.isDev||!L,j=L&&!H;w&&F&&(0,i.setManifestsSingleton)({page:g,clientReferenceManifest:F,serverActionsManifest:w});let U=e.method||"GET",M=(0,s.getTracer)(),q=M.getActiveScopeSpan(),V={params:m,prerenderManifest:A,renderOpts:{experimental:{authInterrupts:!!O.experimental.authInterrupts},cacheComponents:!!O.cacheComponents,supportsDynamicResponse:H,incrementalCache:(0,o.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:O.cacheLife,waitUntil:n.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,n,o)=>E.onRequestError(e,t,n,o,N)},sharedContext:{buildId:T}},$=new l.NodeNextRequest(e),B=new l.NodeNextResponse(t),G=u.NextRequestAdapter.fromNodeNextRequest($,(0,u.signalFromNodeResponse)(t));try{let i=async e=>E.handle(G,V).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=M.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==c.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=r.get("next.route");if(n){let t=`${U} ${n}`;e.setAttributes({"next.route":n,"http.route":n,"next.span_name":t}),e.updateName(t)}else e.updateName(`${U} ${g}`)}),a=!!(0,o.getRequestMeta)(e,"minimalMode"),l=async o=>{var s,l;let u=async({previousCacheEntry:r})=>{try{if(!a&&v&&I&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let s=await i(o);e.fetchMetrics=V.renderOpts.fetchMetrics;let l=V.renderOpts.pendingWaitUntil;l&&n.waitUntil&&(n.waitUntil(l),l=void 0);let u=V.renderOpts.collectedTags;if(!L)return await (0,d.sendResponse)($,B,s,V.renderOpts.pendingWaitUntil),null;{let e=await s.blob(),t=(0,f.toNodeOutgoingHttpHeaders)(s.headers);u&&(t[y.NEXT_CACHE_TAGS_HEADER]=u),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==V.renderOpts.collectedRevalidate&&!(V.renderOpts.collectedRevalidate>=y.INFINITE_CACHE)&&V.renderOpts.collectedRevalidate,n=void 0===V.renderOpts.collectedExpire||V.renderOpts.collectedExpire>=y.INFINITE_CACHE?void 0:V.renderOpts.collectedExpire;return{value:{kind:R.CachedRouteKind.APP_ROUTE,status:s.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:n}}}}catch(t){throw(null==r?void 0:r.isStale)&&await E.onRequestError(e,t,{routerKind:"App Router",routePath:g,routeType:"route",revalidateReason:(0,h.getRevalidateReason)({isStaticGeneration:j,isOnDemandRevalidate:v})},!1,N),t}},c=await E.handleResponse({req:e,nextConfig:O,cacheKey:k,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:A,isRoutePPREnabled:!1,isOnDemandRevalidate:v,revalidateOnlyGenerated:I,responseGenerator:u,waitUntil:n.waitUntil,isMinimalMode:a});if(!L)return null;if((null==c||null==(s=c.value)?void 0:s.kind)!==R.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==c||null==(l=c.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});a||t.setHeader("x-nextjs-cache",v?"REVALIDATED":c.isMiss?"MISS":c.isStale?"STALE":"HIT"),b&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let _=(0,f.fromNodeOutgoingHttpHeaders)(c.value.headers);return a&&L||_.delete(y.NEXT_CACHE_TAGS_HEADER),!c.cacheControl||t.getHeader("Cache-Control")||_.get("Cache-Control")||_.set("Cache-Control",(0,p.getCacheControlHeader)(c.cacheControl)),await (0,d.sendResponse)($,B,new Response(c.value.body,{headers:_,status:c.value.status||200})),null};q?await l(q):await M.withPropagatedContext(e.headers,()=>M.trace(c.BaseServerSpan.handleRequest,{spanName:`${U} ${g}`,kind:s.SpanKind.SERVER,attributes:{"http.method":U,"http.target":e.url}},l))}catch(t){if(t instanceof _.NoFallbackError||await E.onRequestError(e,t,{routerKind:"App Router",routePath:D,routeType:"route",revalidateReason:(0,h.getRevalidateReason)({isStaticGeneration:j,isOnDemandRevalidate:v})},!1,N),L)throw t;return await (0,d.sendResponse)($,B,new Response(null,{status:500})),null}}e.s(["handler",()=>C,"patchFetch",()=>O,"routeModule",()=>E,"serverHooks",()=>m,"workAsyncStorage",()=>S,"workUnitAsyncStorage",()=>T])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__727fa813._.js.map